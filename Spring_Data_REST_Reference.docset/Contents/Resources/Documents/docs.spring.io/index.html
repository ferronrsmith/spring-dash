<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.2">
<meta name="author" content="Jon Brisbin, Oliver Gierke, Greg Turnquist, Jay Bryant">
<title>Spring Data REST Reference Guide</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body id="spring-data-rest-reference" class="book toc2 toc-left">
<div id="header">
<h1>Spring Data REST Reference Guide</h1>
<div class="details">
<span id="author" class="author">Jon Brisbin, Oliver Gierke, Greg Turnquist, Jay Bryant</span><br>
<span id="revnumber">version 3.4.1,</span>
<span id="revdate">2020-11-11</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="index.html#preface">Preface</a>
<ul class="sectlevel1">
<li><a href="index.html#Project">Project Metadata</a></li>
<li><a href="index.html#dependencies">1. Dependencies</a>
<ul class="sectlevel2">
<li><a href="index.html#dependencies.spring-boot">1.1. Dependency Management with Spring Boot</a></li>
<li><a href="index.html#dependencies.spring-framework">1.2. Spring Framework</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#reference">Reference Documentation</a>
<ul class="sectlevel1">
<li><a href="index.html#intro-chapter">2. Introduction</a></li>
<li><a href="index.html#install-chapter">3. Getting started</a>
<ul class="sectlevel2">
<li><a href="index.html#getting-started.boot">3.1. Adding Spring Data REST to a Spring Boot Project</a></li>
<li><a href="index.html#getting-started.gradle">3.2. Adding Spring Data REST to a Gradle project</a></li>
<li><a href="index.html#getting-started.maven">3.3. Adding Spring Data REST to a Maven project</a></li>
<li><a href="index.html#getting-started.configuration">3.4. Configuring Spring Data REST</a></li>
<li><a href="index.html#getting-started.basic-settings">3.5. Basic Settings for Spring Data REST</a>
<ul class="sectlevel3">
<li><a href="index.html#getting-started.setting-repository-detection-strategy">3.5.1. Setting the Repository Detection Strategy</a></li>
<li><a href="index.html#getting-started.changing-base-uri">3.5.2. Changing the Base URI</a></li>
<li><a href="index.html#getting-started.changing-other-properties">3.5.3. Changing Other Spring Data REST Properties</a></li>
</ul>
</li>
<li><a href="index.html#getting-started.bootstrap">3.6. Starting the Application</a></li>
</ul>
</li>
<li><a href="index.html#repository-resources">4. Repository resources</a>
<ul class="sectlevel2">
<li><a href="index.html#repository-resources.fundamentals">4.1. Fundamentals</a>
<ul class="sectlevel3">
<li><a href="index.html#repository-resources.methods">4.1.1. Repository methods exposure</a></li>
<li><a href="index.html#repository-resources.default-status-codes">4.1.2. Default Status Codes</a></li>
<li><a href="index.html#repository-resources.resource-discoverability">4.1.3. Resource Discoverability</a></li>
</ul>
</li>
<li><a href="index.html#repository-resources.collection-resource">4.2. The Collection Resource</a>
<ul class="sectlevel3">
<li><a href="index.html#">4.2.1. Supported HTTP Methods</a>
<ul class="sectlevel4">
<li><a href="index.html#"><code>GET</code></a></li>
<li><a href="index.html#"><code>HEAD</code></a></li>
<li><a href="index.html#"><code>POST</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#repository-resources.item-resource">4.3. The Item Resource</a>
<ul class="sectlevel3">
<li><a href="index.html#">4.3.1. Supported HTTP Methods</a>
<ul class="sectlevel4">
<li><a href="index.html#">GET</a></li>
<li><a href="index.html#"><code>HEAD</code></a></li>
<li><a href="index.html#"><code>PUT</code></a></li>
<li><a href="index.html#"><code>PATCH</code></a></li>
<li><a href="index.html#"><code>DELETE</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#repository-resources.association-resource">4.4. The Association Resource</a>
<ul class="sectlevel3">
<li><a href="index.html#">4.4.1. Supported HTTP Methods</a>
<ul class="sectlevel4">
<li><a href="index.html#"><code>GET</code></a></li>
<li><a href="index.html#"><code>PUT</code></a></li>
<li><a href="index.html#"><code>POST</code></a></li>
<li><a href="index.html#"><code>DELETE</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#repository-resources.search-resource">4.5. The Search Resource</a>
<ul class="sectlevel3">
<li><a href="index.html#">4.5.1. Supported HTTP Methods</a>
<ul class="sectlevel4">
<li><a href="index.html#"><code>GET</code></a></li>
<li><a href="index.html#"><code>HEAD</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#repository-resources.query-method-resource">4.6. The Query Method Resource</a>
<ul class="sectlevel3">
<li><a href="index.html#">4.6.1. Supported HTTP Methods</a>
<ul class="sectlevel4">
<li><a href="index.html#"><code>GET</code></a></li>
<li><a href="index.html#"><code>HEAD</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#paging-and-sorting">5. Paging and Sorting</a>
<ul class="sectlevel2">
<li><a href="index.html#">5.1. Paging</a>
<ul class="sectlevel3">
<li><a href="index.html#paging-and-sorting.prev-and-next-links">5.1.1. Previous and Next Links</a></li>
</ul>
</li>
<li><a href="index.html#paging-and-sorting.sorting">5.2. Sorting</a></li>
</ul>
</li>
<li><a href="index.html#representations">6. Domain Object Representations (Object Mapping)</a>
<ul class="sectlevel2">
<li><a href="index.html#">6.1. Adding Custom Serializers and Deserializers to Jackson&#8217;s ObjectMapper</a>
<ul class="sectlevel3">
<li><a href="index.html#">6.1.1. Abstract Class Registration</a></li>
<li><a href="index.html#">6.1.2. Adding Custom Serializers for Domain Types</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#projections-excerpts">7. Projections and Excerpts</a>
<ul class="sectlevel2">
<li><a href="index.html#projections-excerpts.projections">7.1. Projections</a>
<ul class="sectlevel3">
<li><a href="index.html#projections-excerpts.finding-projections">7.1.1. Finding Existing Projections</a></li>
<li><a href="index.html#projections-excerpts.projections.hidden-data">7.1.2. Bringing in Hidden Data</a></li>
</ul>
</li>
<li><a href="index.html#projections-excerpts.excerpts">7.2. Excerpts</a>
<ul class="sectlevel3">
<li><a href="index.html#projections-excerpts.excerpting-commonly-accessed-data">7.2.1. Excerpting Commonly Accessed Data</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#conditional">8. Conditional Operations with Headers</a>
<ul class="sectlevel2">
<li><a href="index.html#conditional.etag">8.1. <code>ETag</code>, <code>If-Match</code>, and <code>If-None-Match</code> Headers</a></li>
<li><a href="index.html#conditional.if-modified-since">8.2. <code>If-Modified-Since</code> header</a></li>
<li><a href="index.html#headers.better-client-architecture">8.3. Architecting a More Efficient Front End</a></li>
</ul>
</li>
<li><a href="index.html#validation">9. Validation</a>
<ul class="sectlevel2">
<li><a href="index.html#">9.1. Assigning Validators Manually</a></li>
</ul>
</li>
<li><a href="index.html#events">10. Events</a>
<ul class="sectlevel2">
<li><a href="index.html#events.application-listener">10.1. Writing an <code>ApplicationListener</code></a></li>
<li><a href="index.html#">10.2. Writing an Annotated Handler</a></li>
</ul>
</li>
<li><a href="index.html#integration">11. Integration</a>
<ul class="sectlevel2">
<li><a href="index.html#">11.1. Programmatic Links</a></li>
</ul>
</li>
<li><a href="index.html#metadata">12. Metadata</a>
<ul class="sectlevel2">
<li><a href="index.html#metadata.alps">12.1. Application-Level Profile Semantics (ALPS)</a>
<ul class="sectlevel3">
<li><a href="index.html#metadata.alps.control-types">12.1.1. Hypermedia Control Types</a></li>
<li><a href="index.html#metadata.alps.projections">12.1.2. ALPS with Projections</a></li>
<li><a href="index.html#metadata.alps.descriptions">12.1.3. Adding Custom Details to Your ALPS Descriptions</a></li>
</ul>
</li>
<li><a href="index.html#metadata.json-schema">12.2. JSON Schema</a></li>
</ul>
</li>
<li><a href="index.html#security">13. Security</a>
<ul class="sectlevel2">
<li><a href="index.html#security.pre-and-post">13.1. <code>@Pre</code> and <code>@Post</code> Security</a></li>
<li><a href="index.html#security.secured">13.2. @Secured security</a></li>
<li><a href="index.html#security.enable-method-level">13.3. Enabling Method-level Security</a></li>
</ul>
</li>
<li><a href="index.html#tools">14. Tools</a>
<ul class="sectlevel2">
<li><a href="index.html#">14.1. The HAL Browser</a></li>
</ul>
</li>
<li><a href="index.html#customizing-sdr">15. Customizing Spring Data REST</a>
<ul class="sectlevel2">
<li><a href="index.html#">15.1. Customizing Item Resource URIs</a></li>
<li><a href="index.html#customizing-sdr.repository-exposure">15.2. Customizing repository exposure</a></li>
<li><a href="index.html#customizing-sdr.http-methods">15.3. Customizing supported HTTP methods</a>
<ul class="sectlevel3">
<li><a href="index.html#customizing-sdr.http-methods.default-exposure">15.3.1. Customizing default exposure</a></li>
</ul>
</li>
<li><a href="index.html#customizing-sdr.configuring-the-rest-url-path">15.4. Configuring the REST URL Path</a>
<ul class="sectlevel3">
<li><a href="index.html#">15.4.1. Handling <code>rel</code> Attributes</a></li>
<li><a href="index.html#customizing-sdr.hiding-repositories">15.4.2. Hiding Certain Repositories, Query Methods, or Fields</a></li>
<li><a href="index.html#customizing-sdr.hiding-repository-crud-methods">15.4.3. Hiding Repository CRUD Methods</a></li>
</ul>
</li>
<li><a href="index.html#customizing-sdr.adding-sdr-to-spring-mvc-app">15.5. Adding Spring Data REST to an Existing Spring MVC Application</a>
<ul class="sectlevel3">
<li><a href="index.html#">15.5.1. More on Required Configuration</a>
<ul class="sectlevel4">
<li><a href="index.html#"><code>RepositoryRestHandlerMapping</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#customizing-sdr.overriding-sdr-response-handlers">15.6. Overriding Spring Data REST Response Handlers</a>
<ul class="sectlevel3">
<li><a href="index.html#customizing-sdr.overriding-sdr-response-handlers.annotations">15.6.1. @RepositoryRestResource VS. @BasePathAwareController</a></li>
</ul>
</li>
<li><a href="index.html#customizing-sdr.customizing-json-output">15.7. Customizing the JSON Output</a>
<ul class="sectlevel3">
<li><a href="index.html#">15.7.1. The <code>ResourceProcessor</code> Interface</a></li>
<li><a href="index.html#">15.7.2. Adding Links</a></li>
<li><a href="index.html#">15.7.3. Customizing the Representation</a></li>
</ul>
</li>
<li><a href="index.html#customizing-sdr.custom-jackson-deserialization">15.8. Adding Custom Serializers and Deserializers to Jackson&#8217;s <code>ObjectMapper</code></a>
<ul class="sectlevel3">
<li><a href="index.html#">15.8.1. Abstract Class Registration</a></li>
<li><a href="index.html#">15.8.2. Adding Custom Serializers for Domain Types</a></li>
</ul>
</li>
<li><a href="index.html#customizing-sdr.configuring-cors">15.9. Configuring CORS</a>
<ul class="sectlevel3">
<li><a href="index.html#">15.9.1. Repository Interface CORS Configuration</a></li>
<li><a href="index.html#">15.9.2. Repository REST Controller Method CORS Configuration</a></li>
<li><a href="index.html#">15.9.3. Global CORS Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#appendix">Appendix</a>
<ul class="sectlevel1">
<li><a href="index.html#example-api-usage-with-curl">Appendix A: Using cURL to talk to Spring Data REST</a></li>
<li><a href="index.html#spring-data-examples">Appendix B: Spring Data REST example projects</a>
<ul class="sectlevel2">
<li><a href="index.html#spring-data-examples.multi-store">Multi-store Example</a></li>
<li><a href="index.html#spring-data-examples.projections">Projections</a></li>
<li><a href="index.html#spring-data-examples.spring-security">Spring Data REST with Spring Security</a></li>
<li><a href="index.html#spring-data-examples.starbucks">Starbucks example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; 2012-2019 Original authors</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically.
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="preface" class="sect0"><a class="anchor" href="index.html#preface"></a>Preface</h1>
<div class="sect1">
<h2 id="Project"><a class="anchor" href="index.html#Project"></a>Project Metadata</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Version control: <a href="https://github.com/spring-projects/spring-data-rest" class="bare">https://github.com/spring-projects/spring-data-rest</a></p>
</li>
<li>
<p>Bugtracker: <a href="https://jira.spring.io/browse/DATAREST" class="bare">https://jira.spring.io/browse/DATAREST</a></p>
</li>
<li>
<p>Project page: <a href="https://projects.spring.io/spring-data-rest" class="bare">https://projects.spring.io/spring-data-rest</a></p>
</li>
<li>
<p>Release repository: <a href="https://repo.spring.io/libs-release" class="bare">https://repo.spring.io/libs-release</a></p>
</li>
<li>
<p>Milestone repository: <a href="https://repo.spring.io/libs-milestone" class="bare">https://repo.spring.io/libs-milestone</a></p>
</li>
<li>
<p>Snapshot repository: <a href="https://repo.spring.io/libs-snapshot" class="bare">https://repo.spring.io/libs-snapshot</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dependencies"><a class="anchor" href="index.html#dependencies"></a>1. Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Due to the different inception dates of individual Spring Data modules, most of them carry different major and minor version numbers. The easiest way to find compatible ones is to rely on the Spring Data Release Train BOM that we ship with the compatible versions defined. In a Maven project, you would declare this dependency in the <code>&lt;dependencyManagement /&gt;</code> section of your POM as follows:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Using the Spring Data release train BOM</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
      &lt;artifactId&gt;spring-data-bom&lt;/artifactId&gt;
      &lt;version&gt;2020.0.1&lt;/version&gt;
      &lt;scope&gt;import&lt;/scope&gt;
      &lt;type&gt;pom&lt;/type&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre>
</div>
</div>
</div>
</div>
<div id="dependencies.train-version" class="paragraph">
<p>The current release train version is <code>2020.0.1</code>. The train version uses <a href="https://calver.org/">calver</a> with the pattern <code>YYYY.MINOR.MICRO</code>.
The version name follows <code>${calver}</code> for GA releases and service releases and the following pattern for all other versions: <code>${calver}-${modifier}</code>, where <code>modifier</code> can be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SNAPSHOT</code>: Current snapshots</p>
</li>
<li>
<p><code>M1</code>, <code>M2</code>, and so on: Milestones</p>
</li>
<li>
<p><code>RC1</code>, <code>RC2</code>, and so on: Release candidates</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find a working example of using the BOMs in our <a href="https://github.com/spring-projects/spring-data-examples/tree/master/bom">Spring Data examples repository</a>. With that in place, you can declare the Spring Data modules you would like to use without a version in the <code>&lt;dependencies /&gt;</code> block, as follows:</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Declaring a dependency to a Spring Data module</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;
  &lt;/dependency&gt;
&lt;dependencies&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dependencies.spring-boot"><a class="anchor" href="index.html#dependencies.spring-boot"></a>1.1. Dependency Management with Spring Boot</h3>
<div class="paragraph">
<p>Spring Boot selects a recent version of Spring Data modules for you. If you still want to upgrade to a newer version, set
the <code>spring-data-releasetrain.version</code> property to the <a href="index.html#dependencies.train-version">train version and iteration</a> you would like to use.</p>
</div>
</div>
<div class="sect2">
<h3 id="dependencies.spring-framework"><a class="anchor" href="index.html#dependencies.spring-framework"></a>1.2. Spring Framework</h3>
<div class="paragraph">
<p>The current version of Spring Data modules require Spring Framework 5.3.1 or better. The modules might also work with an older bugfix version of that minor version. However, using the most recent version within that generation is highly recommended.</p>
</div>
</div>
</div>
</div>
<h1 id="reference" class="sect0"><a class="anchor" href="index.html#reference"></a>Reference Documentation</h1>
<div class="sect1">
<h2 id="intro-chapter"><a class="anchor" href="index.html#intro-chapter"></a>2. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST web services have become the number one means for application integration on the web. In its core, REST defines that a system that consists of resources with which clients interact. These resources are implemented in a hypermedia-driven way. <a href="../../../../../../spring-framework/docs/current/spring-framework-reference/web.html#spring-web">Spring MVC</a> and <a href="../../../../../../spring-framework/docs/current/spring-framework-reference/web-reactive.html#spring-webflux">Spring WebFlux</a> each offer a solid foundation to build theses kinds of services. However, implementing even the simplest tenet of REST web services for a multi-domain object system can be quite tedious and result in a lot of boilerplate code.</p>
</div>
<div class="paragraph">
<p>Spring Data REST builds on top of the Spring Data repositories and automatically exports those as REST resources. It leverages hypermedia to let clients automatically find functionality exposed by the repositories and integrate these resources into related hypermedia-based functionality.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-chapter"><a class="anchor" href="index.html#install-chapter"></a>3. Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Data REST is itself a Spring MVC application and is designed in such a way that it should integrate with your existing Spring MVC applications with little effort. An existing (or future) layer of services can run alongside Spring Data REST with only minor additional work.</p>
</div>
<div class="sect2">
<h3 id="getting-started.boot"><a class="anchor" href="index.html#getting-started.boot"></a>3.1. Adding Spring Data REST to a Spring Boot Project</h3>
<div class="paragraph">
<p>The simplest way to get to started is to build a Spring Boot application because Spring Boot has a starter for Spring Data REST and uses auto-configuration. The following example shows how to use Gradle to include Spring Data Rest in a Spring Boot project:</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Spring Boot configuration with Gradle</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">dependencies {
  ...
  compile("org.springframework.boot:spring-boot-starter-data-rest")
  ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to use Maven to include Spring Data Rest in a Spring Boot project:</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Spring Boot configuration with Maven</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencies&gt;
  ...
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;
  &lt;/dependency&gt;
  ...
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need not supply the version number if you use the <a href="../../../../../../spring-boot/docs/current/reference/htmlsingle/index.html#build-tool-plugins-gradle-plugin">Spring Boot Gradle plugin</a> or the <a href="../../../../../../spring-boot/docs/current/reference/htmlsingle/index.html#build-tool-plugins-maven-plugin">Spring Boot Maven plugin</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When you use Spring Boot, Spring Data REST gets configured automatically.</p>
</div>
</div>
<div class="sect2">
<h3 id="getting-started.gradle"><a class="anchor" href="index.html#getting-started.gradle"></a>3.2. Adding Spring Data REST to a Gradle project</h3>
<div class="paragraph">
<p>To add Spring Data REST to a Gradle-based project, add the <code>spring-data-rest-webmvc</code> artifact to your compile-time dependencies, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">dependencies {
  … other project dependencies
  compile("org.springframework.data:spring-data-rest-webmvc:3.4.1")
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="getting-started.maven"><a class="anchor" href="index.html#getting-started.maven"></a>3.3. Adding Spring Data REST to a Maven project</h3>
<div class="paragraph">
<p>To add Spring Data REST to a Maven-based project, add the <code>spring-data-rest-webmvc</code> artifact to your compile-time dependencies, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
  &lt;artifactId&gt;spring-data-rest-webmvc&lt;/artifactId&gt;
  &lt;version&gt;3.4.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="getting-started.configuration"><a class="anchor" href="index.html#getting-started.configuration"></a>3.4. Configuring Spring Data REST</h3>
<div class="paragraph">
<p>To install Spring Data REST alongside your existing Spring MVC application, you need to include the appropriate MVC configuration.
Spring Data REST configuration is defined in a class called <code>RepositoryRestMvcConfiguration</code> and you can import that class into your application&#8217;s configuration.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This step is unnecessary if you use Spring Boot&#8217;s auto-configuration. Spring Boot automatically enables Spring Data REST when you include <strong>spring-boot-starter-data-rest</strong> and, in your list of dependencies, your app is flagged with either <code>@SpringBootApplication</code> or <code>@EnableAutoConfiguration</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To customize the configuration, register a <code>RepositoryRestConfigurer</code> (or extend <code>RepositoryRestConfigurerAdapter</code>) and implement or override the <code>configure…</code>-methods relevant to your use case.</p>
</div>
<div class="paragraph">
<p>Make sure you also configure Spring Data repositories for the store you use. For details on that, see the reference documentation for the <a href="https://projects.spring.io/spring-data/">corresponding Spring Data module</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="getting-started.basic-settings"><a class="anchor" href="index.html#getting-started.basic-settings"></a>3.5. Basic Settings for Spring Data REST</h3>
<div class="paragraph">
<p>This section covers the basic settings that you can manipulate when you configure a Spring Data REST application, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="index.html#getting-started.setting-repository-detection-strategy">Setting the Repository Detection Strategy</a></p>
</li>
<li>
<p><a href="index.html#getting-started.changing-base-uri">Changing the Base URI</a></p>
</li>
<li>
<p><a href="index.html#getting-started.changing-other-properties">Changing Other Spring Data REST Properties</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="getting-started.setting-repository-detection-strategy"><a class="anchor" href="index.html#getting-started.setting-repository-detection-strategy"></a>3.5.1. Setting the Repository Detection Strategy</h4>
<div class="paragraph">
<p>Spring Data REST uses a <code>RepositoryDetectionStrategy</code> to determine whether a repository is exported as a REST resource. The <code>RepositoryDiscoveryStrategies</code> enumeration includes the following values:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Repository detection strategies</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DEFAULT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes all public repository interfaces but considers the <code>exported</code> flag of <code>@(Repository)RestResource</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ALL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes all repositories independently of type visibility and annotations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ANNOTATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only repositories annotated with <code>@(Repository)RestResource</code> are exposed, unless their <code>exported</code> flag is set to <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VISIBILITY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only public repositories annotated are exposed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="getting-started.changing-base-uri"><a class="anchor" href="index.html#getting-started.changing-base-uri"></a>3.5.2. Changing the Base URI</h4>
<div class="paragraph">
<p>By default, Spring Data REST serves up REST resources at the root URI, '/'. There are multiple ways to change the base path.</p>
</div>
<div class="paragraph">
<p>With Spring Boot 1.2 and later versions, you can do change the base URI by setting a single property in <code>application.properties</code>, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">spring.data.rest.basePath=/api</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With Spring Boot 1.1 or earlier, or if you are not using Spring Boot, you can do the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Configuration
class CustomRestMvcConfiguration {

  @Bean
  public RepositoryRestConfigurer repositoryRestConfigurer() {

    return new RepositoryRestConfigurerAdapter() {

      @Override
      public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {
        config.setBasePath("/api");
      }
    };
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can register a custom implementation of <code>RepositoryRestConfigurer</code> as a Spring bean and make sure it gets picked up by component scanning, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component
public class CustomizedRestMvcConfiguration extends RepositoryRestConfigurerAdapter {

  @Override
  public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {
    config.setBasePath("/api");
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Both of the preceding approaches change the base path to <code>/api</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="getting-started.changing-other-properties"><a class="anchor" href="index.html#getting-started.changing-other-properties"></a>3.5.3. Changing Other Spring Data REST Properties</h4>
<div class="paragraph">
<p>You can alter the following properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Spring Boot configurable properties</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>basePath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the root URI for Spring Data REST</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultPageSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">change the default for the number of items served in a single page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxPageSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">change the maximum number of items in a single page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pageParamName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">change the name of the query parameter for selecting pages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limitParamName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">change the name of the query parameter for the number of items to show in a page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sortParamName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">change the name of the query parameter for sorting</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultMediaType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">change the default media type to use when none is specified</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>returnBodyOnCreate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">change whether a body should be returned when creating a new entity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>returnBodyOnUpdate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">change whether a body should be returned when updating an entity</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="getting-started.bootstrap"><a class="anchor" href="index.html#getting-started.bootstrap"></a>3.6. Starting the Application</h3>
<div class="paragraph">
<p>At this point, you must also configure your key data store.</p>
</div>
<div class="paragraph">
<p>Spring Data REST officially supports:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://projects.spring.io/spring-data-jpa/">Spring Data JPA</a></p>
</li>
<li>
<p><a href="https://projects.spring.io/spring-data-mongodb/">Spring Data MongoDB</a></p>
</li>
<li>
<p><a href="https://projects.spring.io/spring-data-neo4j/">Spring Data Neo4j</a></p>
</li>
<li>
<p><a href="https://projects.spring.io/spring-data-gemfire/">Spring Data GemFire</a></p>
</li>
<li>
<p><a href="https://projects.spring.io/spring-data-cassandra/">Spring Data Cassandra</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following Getting Started guides can help you get up and running quickly:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://spring.io/guides/gs/accessing-data-rest/">Spring Data JPA</a></p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/accessing-mongodb-data-rest/">Spring Data MongoDB</a></p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/accessing-neo4j-data-rest/">Spring Data Neo4j</a></p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/accessing-gemfire-data-rest/">Spring Data GemFire</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These linked guides introduce how to add dependencies for the related data store, configure domain objects, and define repositories.</p>
</div>
<div class="paragraph">
<p>You can run your application as either a Spring Boot app (with the links shown earlier) or configure it as a classic Spring MVC app.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In general, Spring Data REST does not add functionality to a given data store. This means that, by definition, it should work with any Spring Data project that supports the repository programming model. The data stores listed above are the ones for which we have written integration tests to verify that Spring Data REST works with them.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From this point, you can <a href="index.html#customizing-sdr">customize Spring Data REST</a> with various options.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="repository-resources"><a class="anchor" href="index.html#repository-resources"></a>4. Repository resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="repository-resources.fundamentals"><a class="anchor" href="index.html#repository-resources.fundamentals"></a>4.1. Fundamentals</h3>
<div class="paragraph">
<p>The core functionality of Spring Data REST is to export resources for Spring Data repositories. Thus, the core artifact to look at and potentially customize the way the exporting works is the repository interface. Consider the following repository interface:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">public interface OrderRepository extends CrudRepository&lt;Order, Long&gt; { }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For this repository, Spring Data REST exposes a collection resource at <code>/orders</code>. The path is derived from the uncapitalized, pluralized, simple class name of the domain class being managed. It also exposes an item resource for each of the items managed by the repository under the URI template <code>/orders/{id}</code>.</p>
</div>
<div class="paragraph">
<p>By default the HTTP methods to interact with these resources map to the according methods of <code>CrudRepository</code>. Read more on that in the sections on <a href="index.html#repository-resources.collection-resource">collection resources</a> and <a href="index.html#repository-resources.item-resource">item resources</a>.</p>
</div>
<div class="sect3">
<h4 id="repository-resources.methods"><a class="anchor" href="index.html#repository-resources.methods"></a>4.1.1. Repository methods exposure</h4>
<div class="paragraph">
<p>Which HTTP resources are exposed for a certain repository is mostly driven by the structure of the repository.
In other words, the resource exposure will follow which methods you have exposed on the repository.
If you extend <code>CrudRepository</code> you usually expose all methods required to expose all HTTP resources we can register by default.
Each of the resources listed below will define which of the methods need to be present so that a particular HTTP method can be exposed for each of the resources.
That means, that repositories that are not exposing those methods&#8201;&#8212;&#8201;either by not declaring them at all or explicitly using <code>@RestResource(exported = false)</code>&#8201;&#8212;&#8201;won&#8217;t expose those HTTP methods on those resources.</p>
</div>
<div class="paragraph">
<p>For details on how to tweak the default method exposure or dedicated HTTP methods individually see</p>
</div>
</div>
<div class="sect3">
<h4 id="repository-resources.default-status-codes"><a class="anchor" href="index.html#repository-resources.default-status-codes"></a>4.1.2. Default Status Codes</h4>
<div class="paragraph">
<p>For the resources exposed, we use a set of default status codes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>200 OK</code>: For plain <code>GET</code> requests.</p>
</li>
<li>
<p><code>201 Created</code>: For <code>POST</code> and <code>PUT</code> requests that create new resources.</p>
</li>
<li>
<p><code>204 No Content</code>: For <code>PUT</code>, <code>PATCH</code>, and <code>DELETE</code> requests when the configuration is set to not return response bodies for resource updates (<code>RepositoryRestConfiguration.returnBodyOnUpdate</code>). If the configuration value is set to include responses for <code>PUT</code>, <code>200 OK</code> is returned for updates, and <code>201 Created</code> is returned for resource created through <code>PUT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the configuration values (<code>RepositoryRestConfiguration.returnBodyOnUpdate</code> and <code>RepositoryRestConfiguration.returnBodyCreate)</code> are explicitly set to <code>null</code>, the presence of the HTTP Accept header is used to determine the response code.</p>
</div>
</div>
<div class="sect3">
<h4 id="repository-resources.resource-discoverability"><a class="anchor" href="index.html#repository-resources.resource-discoverability"></a>4.1.3. Resource Discoverability</h4>
<div class="paragraph">
<p>A core principle of <a href="https://spring.io/understanding/HATEOAS">HATEOAS</a> is that resources should be discoverable through the publication of links that point to the available resources. There are a few competing de-facto standards of how to represent links in JSON. By default, Spring Data REST uses <a href="https://tools.ietf.org/html/draft-kelly-json-hal">HAL</a> to render responses. HAL defines the links to be contained in a property of the returned document.</p>
</div>
<div class="paragraph">
<p>Resource discovery starts at the top level of the application. By issuing a request to the root URL under which the Spring Data REST application is deployed, the client can extract, from the returned JSON object, a set of links that represent the next level of resources that are available to the client.</p>
</div>
<div class="paragraph">
<p>For example, to discover what resources are available at the root of the application, issue an HTTP <code>GET</code> to the root URL, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">curl -v http://localhost:8080/

&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/hal+json

{ "_links" : {
    "orders" : {
      "href" : "http://localhost:8080/orders"
    },
    "profile" : {
      "href" : "http://localhost:8080/api/alps"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The property of the result document is an object that consists of keys representing the relation type, with nested link objects as specified in HAL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For more details about the <code>profile</code> link, see <a href="index.html#metadata.alps">Application-Level Profile Semantics (ALPS)</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="repository-resources.collection-resource"><a class="anchor" href="index.html#repository-resources.collection-resource"></a>4.2. The Collection Resource</h3>
<div class="paragraph">
<p>Spring Data REST exposes a collection resource named after the uncapitalized, pluralized version of the domain class the exported repository is handling. Both the name of the resource and the path can be customized by using <code>@RepositoryRestResource</code> on the repository interface.</p>
</div>
<div class="sect3">
<h4>4.2.1. Supported HTTP Methods</h4>
<div class="paragraph">
<p>Collections resources support both <code>GET</code> and <code>POST</code>. All other HTTP methods cause a <code>405 Method Not Allowed</code>.</p>
</div>
<div class="sect4">
<h5><code>GET</code></h5>
<div class="paragraph">
<p>Returns all entities the repository servers through its <code>findAll(…)</code> method.
If the repository is a paging repository we include the pagination links if necessary and additional page metadata.</p>
</div>
<div class="sect5">
<h6>Methods used for invocation</h6>
<div class="paragraph">
<p>The following methods are used if present (decending order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>findAll(Pageable)</code></p>
</li>
<li>
<p><code>findAll(Sort)</code></p>
</li>
<li>
<p><code>findAll()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the default exposure of methods, see <a href="index.html#repository-resources.methods">Repository methods exposure</a>.</p>
</div>
</div>
<div class="sect5">
<h6>Parameters</h6>
<div class="paragraph">
<p>If the repository has pagination capabilities, the resource takes the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>page</code>: The page number to access (0 indexed, defaults to 0).</p>
</li>
<li>
<p><code>size</code>: The page size requested (defaults to 20).</p>
</li>
<li>
<p><code>sort</code>: A collection of sort directives in the format <code>($propertyname,)+[asc|desc]</code>?.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Custom Status Codes</h6>
<div class="paragraph">
<p>The <code>GET</code> method has only one custom status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>405 Method Not Allowed</code>: If the <code>findAll(…)</code> methods were not exported (through <code>@RestResource(exported = false)</code>) or are not present in the repository.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>GET</code> method supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application/hal+json</code></p>
</li>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Related Resources</h6>
<div class="paragraph">
<p>The <code>GET</code> method supports a single link for discovering related resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>search</code>: A <a href="index.html#repository-resources.search-resource">search resource</a> is exposed if the backing repository exposes query methods.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5><code>HEAD</code></h5>
<div class="paragraph">
<p>The <code>HEAD</code> method returns whether the collection resource is available. It has no status codes, media types, or related resources.</p>
</div>
<div class="sect5">
<h6>Methods used for invocation</h6>
<div class="paragraph">
<p>The following methods are used if present (decending order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>findAll(Pageable)</code></p>
</li>
<li>
<p><code>findAll(Sort)</code></p>
</li>
<li>
<p><code>findAll()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the default exposure of methods, see <a href="index.html#repository-resources.methods">Repository methods exposure</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5><code>POST</code></h5>
<div class="paragraph">
<p>The <code>POST</code> method creates a new entity from the given request body.</p>
</div>
<div class="sect5">
<h6>Methods used for invocation</h6>
<div class="paragraph">
<p>The following methods are used if present (decending order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>save(…)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the default exposure of methods, see <a href="index.html#repository-resources.methods">Repository methods exposure</a>.</p>
</div>
</div>
<div class="sect5">
<h6>Custom Status Codes</h6>
<div class="paragraph">
<p>The <code>POST</code> method has only one custom status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>405 Method Not Allowed</code>: If the <code>save(…)</code> methods were not exported (through <code>@RestResource(exported = false)</code>) or are not present in the repository at all.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>POST</code> method supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>application/hal+json</p>
</li>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="repository-resources.item-resource"><a class="anchor" href="index.html#repository-resources.item-resource"></a>4.3. The Item Resource</h3>
<div class="paragraph">
<p>Spring Data REST exposes a resource for individual collection items as sub-resources of the collection resource.</p>
</div>
<div class="sect3">
<h4>4.3.1. Supported HTTP Methods</h4>
<div class="paragraph">
<p>Item resources generally support <code>GET</code>, <code>PUT</code>, <code>PATCH</code>, and <code>DELETE</code>, unless explicit configuration prevents that (see &#8220;<a href="index.html#repository-resources.association-resource">The Association Resource</a>&#8221; for details).</p>
</div>
<div class="sect4">
<h5>GET</h5>
<div class="paragraph">
<p>The <code>GET</code> method returns a single entity.</p>
</div>
<div class="sect5">
<h6>Methods used for invocation</h6>
<div class="paragraph">
<p>The following methods are used if present (decending order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>findById(…)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the default exposure of methods, see <a href="index.html#repository-resources.methods">Repository methods exposure</a>.</p>
</div>
</div>
<div class="sect5">
<h6>Custom Status Codes</h6>
<div class="paragraph">
<p>The <code>GET</code> method has only one custom status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>405 Method Not Allowed</code>: If the <code>findOne(…)</code> methods were not exported (through <code>@RestResource(exported = false)</code>) or are not present in the repository.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>GET</code> method supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>application/hal+json</p>
</li>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Related Resources</h6>
<div class="paragraph">
<p>For every association of the domain type, we expose links named after the association property. You can customize this behavior by using <code>@RestResource</code> on the property. The related resources are of the <a href="index.html#repository-resources.association-resource">association resource</a> type.</p>
</div>
</div>
</div>
<div class="sect4">
<h5><code>HEAD</code></h5>
<div class="paragraph">
<p>The <code>HEAD</code> method returns whether the item resource is available. It has no status codes, media types, or related resources.</p>
</div>
<div class="sect5">
<h6>Methods used for invocation</h6>
<div class="paragraph">
<p>The following methods are used if present (decending order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>findById(…)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the default exposure of methods, see <a href="index.html#repository-resources.methods">Repository methods exposure</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5><code>PUT</code></h5>
<div class="paragraph">
<p>The <code>PUT</code> method replaces the state of the target resource with the supplied request body.</p>
</div>
<div class="sect5">
<h6>Methods used for invocation</h6>
<div class="paragraph">
<p>The following methods are used if present (decending order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>save(…)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the default exposure of methods, see <a href="index.html#repository-resources.methods">Repository methods exposure</a>.</p>
</div>
</div>
<div class="sect5">
<h6>Custom Status Codes</h6>
<div class="paragraph">
<p>The <code>PUT</code> method has only one custom status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>405 Method Not Allowed</code>: If the <code>save(…)</code> methods were not exported (through <code>@RestResource(exported = false)</code>) or is not present in the repository at all.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>PUT</code> method supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>application/hal+json</p>
</li>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5><code>PATCH</code></h5>
<div class="paragraph">
<p>The <code>PATCH</code> method is similar to the <code>PUT</code> method but partially updates the resources state.</p>
</div>
<div class="sect5">
<h6>Methods used for invocation</h6>
<div class="paragraph">
<p>The following methods are used if present (decending order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>save(…)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the default exposure of methods, see <a href="index.html#repository-resources.methods">Repository methods exposure</a>.</p>
</div>
</div>
<div class="sect5">
<h6>Custom Status Codes</h6>
<div class="paragraph">
<p>The <code>PATCH</code> method has only one custom status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>405 Method Not Allowed</code>: If the <code>save(…)</code> methods were not exported (through <code>@RestResource(exported = false)</code>) or are not present in the repository.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>PATCH</code> method supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>application/hal+json</p>
</li>
<li>
<p>application/json</p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc6902">application/patch+json</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7386">application/merge-patch+json</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5><code>DELETE</code></h5>
<div class="paragraph">
<p>The <code>DELETE</code> method deletes the resource exposed.</p>
</div>
<div class="sect5">
<h6>Methods used for invocation</h6>
<div class="paragraph">
<p>The following methods are used if present (decending order):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>delete(T)</code></p>
</li>
<li>
<p><code>delete(ID)</code></p>
</li>
<li>
<p><code>delete(Iterable)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on the default exposure of methods, see <a href="index.html#repository-resources.methods">Repository methods exposure</a>.</p>
</div>
</div>
<div class="sect5">
<h6>Custom Status Codes</h6>
<div class="paragraph">
<p>The <code>DELETE</code> method has only one custom status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>405 Method Not Allowed</code>: If the <code>delete(…)</code> methods were not exported (through <code>@RestResource(exported = false)</code>) or are not present in the repository.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="repository-resources.association-resource"><a class="anchor" href="index.html#repository-resources.association-resource"></a>4.4. The Association Resource</h3>
<div class="paragraph">
<p>Spring Data REST exposes sub-resources of every item resource for each of the associations the item resource has. The name and path of the resource defaults to the name of the association property and can be customized by using <code>@RestResource</code> on the association property.</p>
</div>
<div class="sect3">
<h4>4.4.1. Supported HTTP Methods</h4>
<div class="paragraph">
<p>The association resource supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GET</p>
</li>
<li>
<p>PUT</p>
</li>
<li>
<p>POST</p>
</li>
<li>
<p>DELETE</p>
</li>
</ul>
</div>
<div class="sect4">
<h5><code>GET</code></h5>
<div class="paragraph">
<p>The <code>GET</code> method returns the state of the association resource.</p>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>GET</code> method supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>application/hal+json</p>
</li>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5><code>PUT</code></h5>
<div class="paragraph">
<p>The <code>PUT</code> method binds the resource pointed to by the given URI(s) to the resource. This</p>
</div>
<div class="sect5">
<h6>Custom Status Codes</h6>
<div class="paragraph">
<p>The <code>PUT</code> method has only one custom status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>400 Bad Request</code>: When multiple URIs were given for a to-one-association.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>PUT</code> method supports only one media type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>text/uri-list: URIs pointing to the resource to bind to the association.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5><code>POST</code></h5>
<div class="paragraph">
<p>The <code>POST</code> method is supported only for collection associations. It adds a new element to the collection.</p>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>POST</code> method supports only one media type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>text/uri-list: URIs pointing to the resource to add to the association.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5><code>DELETE</code></h5>
<div class="paragraph">
<p>The <code>DELETE</code> method unbinds the association.</p>
</div>
<div class="sect5">
<h6>Custom Status Codes</h6>
<div class="paragraph">
<p>The <code>POST</code> method has only one custom status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>405 Method Not Allowed</code>: When the association is non-optional.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="repository-resources.search-resource"><a class="anchor" href="index.html#repository-resources.search-resource"></a>4.5. The Search Resource</h3>
<div class="paragraph">
<p>The search resource returns links for all query methods exposed by a repository. The path and name of the query method resources can be modified using <code>@RestResource</code> on the method declaration.</p>
</div>
<div class="sect3">
<h4>4.5.1. Supported HTTP Methods</h4>
<div class="paragraph">
<p>As the search resource is a read-only resource, it supports only the <code>GET</code> method.</p>
</div>
<div class="sect4">
<h5><code>GET</code></h5>
<div class="paragraph">
<p>The <code>GET</code> method returns a list of links pointing to the individual query method resources.</p>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>GET</code> method supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>application/hal+json</p>
</li>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Related Resources</h6>
<div class="paragraph">
<p>For every query method declared in the repository, we expose a <a href="index.html#repository-resources.query-method-resource">query method resource</a>. If the resource supports pagination, the URI pointing to it is a URI template containing the pagination parameters.</p>
</div>
</div>
</div>
<div class="sect4">
<h5><code>HEAD</code></h5>
<div class="paragraph">
<p>The <code>HEAD</code> method returns whether the search resource is available. A 404 return code indicates no query method resources are available.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="repository-resources.query-method-resource"><a class="anchor" href="index.html#repository-resources.query-method-resource"></a>4.6. The Query Method Resource</h3>
<div class="paragraph">
<p>The query method resource runs the exposed query through an individual query method on the repository interface.</p>
</div>
<div class="sect3">
<h4>4.6.1. Supported HTTP Methods</h4>
<div class="paragraph">
<p>As the search resource is a read-only resource, it supports <code>GET</code> only.</p>
</div>
<div class="sect4">
<h5><code>GET</code></h5>
<div class="paragraph">
<p>The <code>GET</code> method returns the result of the query execution.</p>
</div>
<div class="sect5">
<h6>Parameters</h6>
<div class="paragraph">
<p>If the query method has pagination capabilities (indicated in the URI template pointing to the resource) the resource takes the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>page</code>: The page number to access (0 indexed, defaults to 0).</p>
</li>
<li>
<p><code>size</code>: The page size requested (defaults to 20).</p>
</li>
<li>
<p><code>sort</code>: A collection of sort directives in the format <code>($propertyname,)+[asc|desc]</code>?.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6>Supported Media Types</h6>
<div class="paragraph">
<p>The <code>GET</code> method supports the following media types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application/hal+json</code></p>
</li>
<li>
<p><code>application/json</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5><code>HEAD</code></h5>
<div class="paragraph">
<p>The <code>HEAD</code> method returns whether a query method resource is available.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="paging-and-sorting"><a class="anchor" href="index.html#paging-and-sorting"></a>5. Paging and Sorting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section documents Spring Data REST&#8217;s usage of the Spring Data Repository paging and sorting abstractions. To familiarize yourself with those features, see the Spring Data documentation for the repository implementation you use (such as Spring Data JPA).</p>
</div>
<div class="sect2">
<h3>5.1. Paging</h3>
<div class="paragraph">
<p>Rather than return everything from a large result set, Spring Data REST recognizes some URL parameters that influence the page size and the starting page number.</p>
</div>
<div class="paragraph">
<p>If you extend <code>PagingAndSortingRepository&lt;T, ID&gt;</code> and access the list of all entities, you get links to the first 20 entities. To set the page size to any other number, add a <code>size</code> parameter, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>http://localhost:8080/people/?size=5</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding example sets the page size to 5.</p>
</div>
<div class="paragraph">
<p>To use paging in your own query methods, you need to change the method signature to accept an additional <code>Pageable</code> parameter and return a <code>Page</code> rather than a <code>List</code>. For example, the following query method is exported to <code>/people/search/nameStartsWith</code> and supports paging:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RestResource(path = "nameStartsWith", rel = "nameStartsWith")
public Page findByNameStartsWith(@Param("name") String name, Pageable p);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The Spring Data REST exporter recognizes the returned <code>Page</code> and gives you the results in the body of the response, just as it would with a non-paged response, but additional links are added to the resource to represent the previous and next pages of data.</p>
</div>
<div class="sect3">
<h4 id="paging-and-sorting.prev-and-next-links"><a class="anchor" href="index.html#paging-and-sorting.prev-and-next-links"></a>5.1.1. Previous and Next Links</h4>
<div class="paragraph">
<p>Each paged response returns links to the previous and next pages of results based on the current page by using the IANA-defined link relations <a href="https://www.w3.org/TR/html5/links.html#link-type-prev"><code>prev</code></a> and <a href="https://www.w3.org/TR/html5/links.html#link-type-next"><code>next</code></a>. If you are currently at the first page of results, however, no <code>prev</code> link is rendered. For the last page of results, no <code>next</code> link is rendered.</p>
</div>
<div class="paragraph">
<p>Consider the following example, where we set the page size to 5:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>curl localhost:8080/people?size=5</pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons{&amp;sort,page,size}", <i class="conum" data-value="1"></i><b>(1)</b>
      "templated" : true
    },
    "next" : {
      "href" : "http://localhost:8080/persons?page=1&amp;size=5{&amp;sort}", <i class="conum" data-value="2"></i><b>(2)</b>
      "templated" : true
    }
  },
  "_embedded" : {
  	... data ...
  },
  "page" : { <i class="conum" data-value="3"></i><b>(3)</b>
    "size" : 5,
    "totalElements" : 50,
    "totalPages" : 10,
    "number" : 0
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>At the top, we see <code>_links</code>:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>self</code> link serves up the whole collection with some options.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>next</code> link points to the next page, assuming the same page size.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>At the bottom is extra data about the page settings, including the size of a page, total elements, total pages, and the page number you are currently viewing.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When using tools such as <code>curl</code> on the command line, if you have a ampersand (<code>&amp;</code>) in your statement, you need to wrap the whole URI in quotation marks.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that the <code>self</code> and <code>next</code> URIs are, in fact, URI templates. They accept not only <code>size</code>, but also <code>page</code> and <code>sort</code> as optional flags.</p>
</div>
<div class="paragraph">
<p>As mentioned earlier, the bottom of the HAL document includes a collection of details about the page. This extra information makes it easy for you to configure UI tools like sliders or indicators to reflect the user&#8217;s overall position when they view the data. For example, the document in the preceding example shows we are looking at the first page (with page numbers starting at 0).</p>
</div>
<div class="paragraph">
<p>The following example shows What happens when we follow the <code>next</code> link:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>$ curl "http://localhost:8080/persons?page=1&amp;size=5"</pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons{&amp;sort,projection,page,size}",
      "templated" : true
    },
    "next" : {
      "href" : "http://localhost:8080/persons?page=2&amp;size=5{&amp;sort,projection}", <i class="conum" data-value="1"></i><b>(1)</b>
      "templated" : true
    },
    "prev" : {
      "href" : "http://localhost:8080/persons?page=0&amp;size=5{&amp;sort,projection}", <i class="conum" data-value="2"></i><b>(2)</b>
      "templated" : true
    }
  },
  "_embedded" : {
	... data ...
  },
  "page" : {
    "size" : 5,
    "totalElements" : 50,
    "totalPages" : 10,
    "number" : 1 <i class="conum" data-value="3"></i><b>(3)</b>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This looks very similar, except for the following differences:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>next</code> link now points to yet another page, indicating its relative perspective to the <code>self</code> link.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A <code>prev</code> link now appears, giving us a path to the previous page.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The current number is now 1 (indicating the second page).</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>This feature lets you map optional buttons on the screen to these hypermedia controls, letting you implement navigational features for the UI experience without having to hard code the URIs. In fact, the user can be empowered to pick from a list of page sizes, dynamically changing the content served, without having to rewrite the <code>next</code> and `prev controls at the top or bottom.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="paging-and-sorting.sorting"><a class="anchor" href="index.html#paging-and-sorting.sorting"></a>5.2. Sorting</h3>
<div class="paragraph">
<p>Spring Data REST recognizes sorting parameters that use the repository sorting support.</p>
</div>
<div class="paragraph">
<p>To have your results sorted on a particular property, add a <code>sort</code> URL parameter with the name of the property on which you want to sort the results. You can control the direction of the sort by appending a comma (<code>,</code>) to the the property name plus either <code>asc</code> or <code>desc</code>. The following would use the <code>findByNameStartsWith</code> query method defined on the <code>PersonRepository</code> for all <code>Person</code> entities with names starting with the letter &#8220;K&#8221; and add sort data that orders the results on the <code>name</code> property in descending order:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>curl -v "http://localhost:8080/people/search/nameStartsWith?name=K&amp;sort=name,desc"</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To sort the results by more than one property, keep adding as many <code>sort=PROPERTY</code> parameters as you need. They are added to the <code>Pageable</code> in the order in which they appear in the query string. Results can be sorted by top-level and nested properties. Use property path notation to express a nested sort property. Sorting by linkable associations (that is, links to top-level resources) is not supported.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="representations"><a class="anchor" href="index.html#representations"></a>6. Domain Object Representations (Object Mapping)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Data REST returns a representation of a domain object that corresponds to the <code>Accept</code> type specified in the HTTP request.</p>
</div>
<div class="paragraph">
<p>Currently, only JSON representations are supported. Other representation types can be supported in the future by adding an appropriate converter and updating the controller methods with the appropriate content-type.</p>
</div>
<div class="paragraph">
<p>Sometimes, the behavior of the Spring Data REST <code>ObjectMapper</code> (which has been specially configured to use intelligent serializers that can turn domain objects into links and back again) may not handle your domain model correctly. There are so many ways you can structure your data that you may find your own domain model is not translated to JSON correctly. It is also sometimes not practical in these cases to try and support a complex domain model in a generic way. Sometimes, depending on the complexity, it is not even possible to offer a generic solution.</p>
</div>
<div class="sect2">
<h3>6.1. Adding Custom Serializers and Deserializers to Jackson&#8217;s ObjectMapper</h3>
<div class="paragraph">
<p>To accommodate the largest percentage of use cases, Spring Data REST tries very hard to render your object graph correctly. It tries to serialize unmanaged beans as normal POJOs, and it tries to create links to managed beans where necessary. However, if your domain model does not easily lend itself to reading or writing plain JSON, you may want to configure Jackson&#8217;s ObjectMapper with your own custom mappings, serializers, and deserializers.</p>
</div>
<div class="sect3">
<h4>6.1.1. Abstract Class Registration</h4>
<div class="paragraph">
<p>One key configuration point you might need to hook into is when you use an abstract class (or an interface) in your domain model. By defualt, Jackson does not know what implementation to create for an interface. Consider the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class MyEntity {
  @OneToMany
  private List&lt;MyInterface&gt; interfaces;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In a default configuration, Jackson has no idea what class to instantiate when POSTing new data to the exporter. This is something you need to tell Jackson either through an annotation, or (more cleanly) by registering a type mapping by using a <code>Module</code>.</p>
</div>
<div class="paragraph">
<p>To add your own Jackson configuration to the <code>ObjectMapper</code> used by Spring Data REST, override the <code>configureJacksonObjectMapper</code> method. That method is passed an <code>ObjectMapper</code> instance that has a special module to handle serializing and deserializing <code>PersistentEntity</code> objects. You can register your own modules as well, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Override
protected void configureJacksonObjectMapper(ObjectMapper objectMapper) {
    objectMapper.registerModule(new SimpleModule("MyCustomModule") {
        @Override
        public void setupModule(SetupContext context) {
            context.addAbstractTypeResolver(
                new SimpleAbstractTypeResolver().addMapping(MyInterface.class,
                                                            MyInterfaceImpl.class)
            );
        }
    });
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once you have access to the <code>SetupContext</code> object in your <code>Module</code>, you can do all sorts of cool things to configure Jackson&#8217;s JSON mapping. You can read more about how <code>Module</code> instances work on <a href="https://wiki.fasterxml.com/JacksonFeatureModules">Jackson&#8217;s wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4>6.1.2. Adding Custom Serializers for Domain Types</h4>
<div class="paragraph">
<p>If you want to serialize or deserialize a domain type in a special way, you can register your own implementations with Jackson&#8217;s <code>ObjectMapper</code>, and the Spring Data REST exporter transparently handles those domain objects correctly. To add serializers from your <code>setupModule</code> method implementation, you can do something like the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Override
public void setupModule(SetupContext context) {
  SimpleSerializers serializers = new SimpleSerializers();
  SimpleDeserializers deserializers = new SimpleDeserializers();

  serializers.addSerializer(MyEntity.class, new MyEntitySerializer());
  deserializers.addDeserializer(MyEntity.class, new MyEntityDeserializer());

  context.addSerializers(serializers);
  context.addDeserializers(deserializers);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="projections-excerpts"><a class="anchor" href="index.html#projections-excerpts"></a>7. Projections and Excerpts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Data REST presents a default view of the domain model you export. However, sometimes, you may need to alter the view of that model for various reasons. This section covers how to define projections and excerpts to serve up simplified and reduced views of resources.</p>
</div>
<div class="sect2">
<h3 id="projections-excerpts.projections"><a class="anchor" href="index.html#projections-excerpts.projections"></a>7.1. Projections</h3>
<div class="paragraph">
<p>Consider the following domain model:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class Person {

  @Id @GeneratedValue
  private Long id;
  private String firstName, lastName;

  @OneToOne
  private Address address;
  …
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>Person</code> object in the preceding example has several attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> is the primary key.</p>
</li>
<li>
<p><code>firstName</code> and <code>lastName</code> are data attributes.</p>
</li>
<li>
<p><code>address</code> is a link to another domain object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now assume that we create a corresponding repository, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>By default, Spring Data REST exports this domain object, including all of its attributes. <code>firstName</code> and <code>lastName</code> are exported as the plain data objects that they are. There are two options regarding the <code>address</code> attribute. One option is to also define a repository for <code>Address</code> objects, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">interface AddressRepository extends CrudRepository&lt;Address, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In this situation, a <code>Person</code> resource renders the <code>address</code> attribute as a URI to its corresponding <code>Address</code> resource. If we were to look up &#8220;Frodo&#8221; in the system, we could expect to see a HAL document like this:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "firstName" : "Frodo",
  "lastName" : "Baggins",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons/1"
    },
    "address" : {
      "href" : "http://localhost:8080/persons/1/address"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There is another way. If the <code>Address</code> domain object does not have its own repository definition, Spring Data REST includes the data fields inside the <code>Person</code> resource, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "firstName" : "Frodo",
  "lastName" : "Baggins",
  "address" : {
    "street": "Bag End",
    "state": "The Shire",
    "country": "Middle Earth"
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons/1"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>But what if you do not want <code>address</code> details at all? Again, by default, Spring Data REST exports all of its attributes (except the <code>id</code>). You can offer the consumer of your REST service an alternative by defining one or more projections. The following example shows a projection that does not include the address:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Projection(name = "noAddresses", types = { Person.class }) <i class="conum" data-value="1"></i><b>(1)</b>
interface NoAddresses { <i class="conum" data-value="2"></i><b>(2)</b>

  String getFirstName(); <i class="conum" data-value="3"></i><b>(3)</b>

  String getLastName(); <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@Projection</code> annotation flags this as a projection. The <code>name</code> attribute provides
the name of the projection, which we cover in more detail shortly. The <code>types</code> attributes targets this projection to apply only to <code>Person</code> objects.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It is a Java interface, making it declarative.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>It exports the <code>firstName</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>It exports the <code>lastName</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>NoAddresses</code> projection only has getters for <code>firstName</code> and <code>lastName</code>, meaning that it does not serve up any address information. Assuming you have a separate repository for <code>Address</code> resources, the default view from Spring Data REST differs slightly from the previous representation, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "firstName" : "Frodo",
  "lastName" : "Baggins",
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons/1{?projection}", <i class="conum" data-value="1"></i><b>(1)</b>
      "templated" : true <i class="conum" data-value="2"></i><b>(2)</b>
    },
    "address" : {
      "href" : "http://localhost:8080/persons/1/address"
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This resource has a new option: <code>{?projection}</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>self</code> URI is a URI Template.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>To view the projection to the resource, look up <code><a href="http://localhost:8080/persons/1?projection=noAddresses" class="bare">http://localhost:8080/persons/1?projection=noAddresses</a></code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The value supplied to the <code>projection</code> query parameter is the same as that specified in <code>@Projection(name = "noAddress")</code>. It has nothing to do with the name of the projection&#8217;s interface.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can have multiple projections.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="index.html#spring-data-examples.projections">Projections</a> to see an example project. We encourage you to experiment with it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Spring Data REST finds projection definitions as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any <code>@Projection</code> interface found in the same package as your entity definitions (or one of its sub-packages) is registered.</p>
</li>
<li>
<p>You can manually register a projection by using <code>RepositoryRestConfiguration.getProjectionConfiguration().addProjection(…)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In either case, the projection interface must have the <code>@Projection</code> annotation.</p>
</div>
<div class="sect3">
<h4 id="projections-excerpts.finding-projections"><a class="anchor" href="index.html#projections-excerpts.finding-projections"></a>7.1.1. Finding Existing Projections</h4>
<div class="paragraph">
<p>Spring Data REST exposes <a href="index.html#metadata.alps">Application-Level Profile Semantics (ALPS)</a> documents, a micro metadata format. To view the ALPS metadata, follow the <code>profile</code> link exposed by the root resource. If you navigate down to the ALPS document for <code>Person</code> resources (which would be <code>/alps/persons</code>), you can find many details about <code>Person</code> resources. Projections are listed, along with the details about the <code>GET</code> REST transition, in blocks similar to the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{ …
  "id" : "get-person", <i class="conum" data-value="1"></i><b>(1)</b>
  "name" : "person",
  "type" : "SAFE",
  "rt" : "#person-representation",
  "descriptors" : [ {
    "name" : "projection", <i class="conum" data-value="2"></i><b>(2)</b>
    "doc" : {
      "value" : "The projection that shall be applied when rendering the response. Acceptable values available in nested descriptors.",
      "format" : "TEXT"
    },
    "type" : "SEMANTIC",
    "descriptors" : [ {
      "name" : "noAddresses", <i class="conum" data-value="3"></i><b>(3)</b>
      "type" : "SEMANTIC",
      "descriptors" : [ {
        "name" : "firstName", <i class="conum" data-value="4"></i><b>(4)</b>
        "type" : "SEMANTIC"
      }, {
        "name" : "lastName", <i class="conum" data-value="4"></i><b>(4)</b>
        "type" : "SEMANTIC"
      } ]
    } ]
  } ]
},
…</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This part of the ALPS document shows details about <code>GET</code> and <code>Person</code> resources.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This part contais the <code>projection</code> options.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This part contains the <code>noAddresses</code> projection.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The actual attributes served up by this projection include <code>firstName</code> and <code>lastName</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Projection definitions are picked up and made available for clients if they are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Flagged with the <code>@Projection</code> annotation and located in the same package (or sub-package) of the domain type, OR</p>
</li>
<li>
<p>Manually registered by using <code>RepositoryRestConfiguration.getProjectionConfiguration().addProjection(…)</code>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="projections-excerpts.projections.hidden-data"><a class="anchor" href="index.html#projections-excerpts.projections.hidden-data"></a>7.1.2. Bringing in Hidden Data</h4>
<div class="paragraph">
<p>So far in this section, we have covered how projections can be used to reduce the information that is presented to the user. Projections can also bring in normally unseen data. For example, Spring Data REST ignores fields or getters that are marked up with <code>@JsonIgnore</code> annotations. Consider the following domain object:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class User {

	@Id @GeneratedValue
	private Long id;
	private String name;

	@JsonIgnore private String password; <i class="conum" data-value="1"></i><b>(1)</b>

	private String[] roles;
  …</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Jackson&#8217;s <code>@JsonIgnore</code> is used to prevent the <code>password</code> field from being serialized into JSON.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>User</code> class in the preceding example can be used to store user information as well as integration with Spring Security. If you create a <code>UserRepository</code>, the <code>password</code> field would normally have been exported, which is not good. In the preceding example, we prevent that from happening by applying Jackson&#8217;s <code>@JsonIgnore</code> on the <code>password</code> field.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Jackson also does not serialize the field into JSON if <code>@JsonIgnore</code> is on the field&#8217;s corresponding getter function.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>However, projections introduce the ability to still serve this field. It is possible to create the following projection:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Projection(name = "passwords", types = { User.class })
interface PasswordProjection {

  String getPassword();
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If such a projection is created and used, it sidesteps the <code>@JsonIgnore</code> directive placed on <code>User.password</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This example may seem a bit contrived, but it is possible, with a richer domain model and many projections, to accidentally leak such details. Since Spring Data REST cannot discern the sensitivity of such data, it is up to you to avoid such situations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Projections can also generate virtual data. Imagine you had the following entity definition:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class Person {

  ...
  private String firstName;
  private String lastName;

  ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can create a projection that combines the two data fields in the preceding example together, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Projection(name = "virtual", types = { Person.class })
public interface VirtualProjection {

  @Value("#{target.firstName} #{target.lastName}") <i class="conum" data-value="1"></i><b>(1)</b>
  String getFullName();

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Spring&#8217;s <code>@Value</code> annotation lets you plug in a SpEL expression that takes the target object and splices together its <code>firstName</code> and <code>lastName</code> attributes to render a read-only <code>fullName</code>.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="projections-excerpts.excerpts"><a class="anchor" href="index.html#projections-excerpts.excerpts"></a>7.2. Excerpts</h3>
<div class="paragraph">
<p>An excerpt is a projection that is automatically applied to a resource collection. For example, you can alter the <code>PersonRepository</code> as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(excerptProjection = NoAddresses.class)
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding example directs Spring Data REST to use the <code>NoAddresses</code> projection when embedding <code>Person</code> resources into collections or related resources.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Excerpt projections are not automatically applied to single resources. They have to be applied deliberately. Excerpt projections are meant to provide a default preview of collection data but not when fetching individual resources. See <a href="https://stackoverflow.com/questions/30220333/why-is-an-excerpt-projection-not-applied-automatically-for-a-spring-data-rest-it">Why is an excerpt projection not applied automatically for a Spring Data REST item resource?</a> for a discussion on the subject.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition to altering the default rendering, excerpts have additional rendering options as shown in the next section.</p>
</div>
<div class="sect3">
<h4 id="projections-excerpts.excerpting-commonly-accessed-data"><a class="anchor" href="index.html#projections-excerpts.excerpting-commonly-accessed-data"></a>7.2.1. Excerpting Commonly Accessed Data</h4>
<div class="paragraph">
<p>A common situation with REST services arises when you compose domain objects. For example, a <code>Person</code> is stored in one table and their related <code>Address</code> is stored in another. By default, Spring Data REST serves up the person&#8217;s <code>address</code> as a URI the client must navigate. But if it is common for consumers to always fetch this extra piece of data, an excerpt projection can put this extra piece of data inline, saving you an extra <code>GET</code>. To do so, you can define another excerpt projection, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Projection(name = "inlineAddress", types = { Person.class }) <i class="conum" data-value="1"></i><b>(1)</b>
interface InlineAddress {

  String getFirstName();

  String getLastName();

  Address getAddress(); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This projection has been named <code>inlineAddress</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This projection adds <code>getAddress</code>, which returns the <code>Address</code> field. When used inside a projection, it causes the information to be included inline.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>You can plug it into the <code>PersonRepository</code> definition, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(excerptProjection = InlineAddress.class)
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Doing so causes the HAL document to appear as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "firstName" : "Frodo",
  "lastName" : "Baggins",
  "address" : { <i class="conum" data-value="1"></i><b>(1)</b>
    "street": "Bag End",
    "state": "The Shire",
    "country": "Middle Earth"
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons/1"
    },
    "address" : { <i class="conum" data-value="2"></i><b>(2)</b>
      "href" : "http://localhost:8080/persons/1/address"
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>address</code> data is directly included inline, so you do not have to navigate to get it.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The link to the <code>Address</code> resource is still provided, making it still possible to navigate to its own resource.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that the preceding example is a mix of the examples shown earlier in this chapter. You may want to read back through them to follow the progression to the final example.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Configuring <code>@RepositoryRestResource(excerptProjection=&#8230;&#8203;)</code> for a repository alters the default behavior. This can potentially cause breaking changes to consumers of your service if you have already made a release.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conditional"><a class="anchor" href="index.html#conditional"></a>8. Conditional Operations with Headers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section shows how Spring Data REST uses standard HTTP headers to enhance performance, conditionalize operations, and contribute to a more sophisticated frontend.</p>
</div>
<div class="sect2">
<h3 id="conditional.etag"><a class="anchor" href="index.html#conditional.etag"></a>8.1. <code>ETag</code>, <code>If-Match</code>, and <code>If-None-Match</code> Headers</h3>
<div class="paragraph">
<p>The <a href="https://tools.ietf.org/html/rfc7232#section-2.3"><code>ETag</code> header</a> provides a way to tag resources. This can prevent clients from overriding each other while also making it possible to reduce unnecessary calls.</p>
</div>
<div class="paragraph">
<p>Consider the following example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. A POJO with a version number</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Sample {

	@Version Long version; <i class="conum" data-value="1"></i><b>(1)</b>

	Sample(Long version) {
		this.version = version;
	}
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@Version</code> annotation (the JPA one in case you&#8217;re using Spring Data JPA, the Spring Data <code>org.springframework.data.annotation.Version</code> one for all other modules) flags this field as a version marker.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The POJO in the preceding example, when served up as a REST resource by Spring Data REST, has an <code>ETag</code> header with the value of the version field.</p>
</div>
<div class="paragraph">
<p>We can conditionally <code>PUT</code>, <code>PATCH</code>, or <code>DELETE</code> that resource if we supply a <code>If-Match</code> header such as the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>curl -v -X PATCH -H 'If-Match: &lt;value of previous ETag&gt;' ...</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Only if the resource&#8217;s current <code>ETag</code> state matches the <code>If-Match</code> header is the operation carried out. This safeguard prevents clients from stomping on each other. Two different clients can fetch the resource and have an identical <code>ETag</code>. If one client updates the resource, it gets a new <code>ETag</code> in the response. But the first client still has the old header. If that client attempts an update with the <code>If-Match</code> header, the update fails because they no longer match. Instead, that client receives an HTTP <code>412 Precondition Failed</code> message to be sent back. The client can then catch up however is necessary.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The term, &#8220;version,&#8221; may carry different semantics with different data stores and even different semantics within your application. Spring Data REST effectively delegates to the data store&#8217;s metamodel to discern if a field is versioned and, if so, only allows the listed updates if <code>ETag</code> elements match.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <a href="https://tools.ietf.org/html/rfc7232#section-3.2"><code>If-None-Match</code> header</a> provides an alternative. Instead of conditional updates, <code>If-None-Match</code> allows conditional queries. Consider the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>curl -v -H 'If-None-Match: &lt;value of previous etag&gt;' ...</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding command (by default) executes a <code>GET</code>. Spring Data REST checks for <code>If-None-Match</code> headers while doing a <code>GET</code>. If the header matches the ETag, it concludes that nothing has changed and, instead of sending a copy of the resource, sends back an HTTP <code>304 Not Modified</code> status code. Semantically, it reads &#8220;If this supplied header value does not match the server-side version, send the whole resource. Otherwise, do not send anything.&#8221;</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This POJO is from an <code>ETag</code>-based unit test, so it does not have <code>@Entity</code> (JPA) or <code>@Document</code> (MongoDB) annotations, as expected in application code. It focuses solely on how a field with <code>@Version</code> results in an <code>ETag</code> header.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="conditional.if-modified-since"><a class="anchor" href="index.html#conditional.if-modified-since"></a>8.2. <code>If-Modified-Since</code> header</h3>
<div class="paragraph">
<p>The <a href="https://tools.ietf.org/html/rfc7232#section-3.3"><code>If-Modified-Since</code> header</a> provides a way to check whether a resource has been updated since the last request, which lets applications avoid resending the same data. Consider the following example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 6. The last modification date captured in a domain type</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Document
public class Receipt {

	public @Id String id;
	public @Version Long version;
	public @LastModifiedDate Date date;  <i class="conum" data-value="1"></i><b>(1)</b>

	public String saleItem;
	public BigDecimal amount;

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Spring Data Commons&#8217;s <code>@LastModifiedDate</code> annotation allows capturing this information in multiple formats (JodaTime&#8217;s <code>DateTime</code>, legacy Java <code>Date</code> and <code>Calendar</code>, JDK8 date/time types, and <code>long</code>/<code>Long</code>).</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>With the date field in the preceding example, Spring Data REST returns a <code>Last-Modified</code> header similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Last-Modified: Wed, 24 Jun 2015 20:28:15 GMT</pre>
</div>
</div>
<div class="paragraph">
<p>This value can be captured and used for subsequent queries to avoid fetching the same data twice when it has not been updated, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>curl -H "If-Modified-Since: Wed, 24 Jun 2015 20:28:15 GMT" ...</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With the preceding command, you are asking that a resource be fetched only if it has changed since the specified time. If so, you get a revised <code>Last-Modified</code> header with which to update the client. If not, you receive an HTTP <code>304 Not Modified</code> status code.</p>
</div>
<div class="paragraph">
<p>The header is perfectly formatted to send back for a future query.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Do not mix and match header value with different queries. Results could be disastrous. Use the header values ONLY when you request the exact same URI and parameters.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="headers.better-client-architecture"><a class="anchor" href="index.html#headers.better-client-architecture"></a>8.3. Architecting a More Efficient Front End</h3>
<div class="paragraph">
<p><code>ETag</code> elements, combined with the <code>If-Match</code> and <code>If-None-Match</code> headers, let you build a front end that is more friendly to consumers' data plans and mobile battery lives. To do so:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Identify the entities that need locking and add a version attribute.</p>
<div class="paragraph">
<p>HTML5 nicely supports <code>data-*</code> attributes, so store the version in the DOM (somewhere such as an <code>data-etag</code> attribute).</p>
</div>
</li>
<li>
<p>Identify the entries that would benefit from tracking the most recent updates. When fetching these resources, store the <code>Last-Modified</code> value in the DOM (<code>data-last-modified</code> perhaps).</p>
</li>
<li>
<p>When fetching resources, also embed <code>self</code> URIs in your DOM nodes (perhaps <code>data-uri</code> or <code>data-self</code>) so that it is easy to go back to the resource.</p>
</li>
<li>
<p>Adjust <code>PUT</code>/<code>PATCH</code>/<code>DELETE</code> operations to use <code>If-Match</code> and also handle HTTP <code>412 Precondition Failed</code> status codes.</p>
</li>
<li>
<p>Adjust <code>GET</code> operations to use <code>If-None-Match</code> and <code>If-Modified-Since</code> and handle HTTP <code>304 Not Modified</code> status codes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By embedding <code>ETag</code> elements and <code>Last-Modified</code> values in your DOM (or perhaps elsewhere for a native mobile app), you can then reduce the consumption of data and battery power by not retrieving the same thing over and over. You can also avoid colliding with other clients and, instead, be alerted when you need to reconcile differences.</p>
</div>
<div class="paragraph">
<p>In this fashion, with just a little tweaking on your front end and some entity-level edits, the backend serves up time-sensitive details you can cash in on when building a customer-friendly client.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validation"><a class="anchor" href="index.html#validation"></a>9. Validation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two ways to register a <code>Validator</code> instance in Spring Data REST: wire it by bean name or register the validator manually. For the majority of cases, the simple bean name prefix style is sufficient.</p>
</div>
<div class="paragraph">
<p>In order to tell Spring Data REST you want a particular <code>Validator</code> assigned to a particular event, prefix the bean name with the event in question. For example, to validate instances of the <code>Person</code> class before new ones are saved into the repository, you would declare an instance of a <code>Validator&lt;Person&gt;</code> in your <code>ApplicationContext</code> with a bean name of <code>beforeCreatePersonValidator</code>. Since the <code>beforeCreate</code> prefix matches a known Spring Data REST event, that validator is wired to the correct event.</p>
</div>
<div class="sect2">
<h3>9.1. Assigning Validators Manually</h3>
<div class="paragraph">
<p>If you would rather not use the bean name prefix approach, you need to register an instance of your validator with the bean whose job it is to invoke validators after the correct event. In your configuration that implements <code>RepositoryRestConfigurer</code> or subclasses Spring Data REST&#8217;s <code>RepositoryRestConfigurerAdapter</code>, override the <code>configureValidatingRepositoryEventListener</code> method and call <code>addValidator</code> on the <code>ValidatingRepositoryEventListener</code>, passing the event on which you want this validator to be triggered and an instance of the validator. The following example shows how to do so:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Override
protected void configureValidatingRepositoryEventListener(ValidatingRepositoryEventListener v) {
  v.addValidator("beforeSave", new BeforeSaveValidator());
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events"><a class="anchor" href="index.html#events"></a>10. Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The REST exporter emits eight different events throughout the process of working with an entity:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BeforeCreateEvent</code></p>
</li>
<li>
<p><code>AfterCreateEvent</code></p>
</li>
<li>
<p><code>BeforeSaveEvent</code></p>
</li>
<li>
<p><code>AfterSaveEvent</code></p>
</li>
<li>
<p><code>BeforeLinkSaveEvent</code></p>
</li>
<li>
<p><code>AfterLinkSaveEvent</code></p>
</li>
<li>
<p><code>BeforeDeleteEvent</code></p>
</li>
<li>
<p><code>AfterDeleteEvent</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="events.application-listener"><a class="anchor" href="index.html#events.application-listener"></a>10.1. Writing an <code>ApplicationListener</code></h3>
<div class="paragraph">
<p>You can subclass an abstract class that listens for these kinds of events and calls the appropriate method based on the event type. To do so, override the methods for the events in question, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class BeforeSaveEventListener extends AbstractRepositoryEventListener {

  @Override
  public void onBeforeSave(Object entity) {
    ... logic to handle inspecting the entity before the Repository saves it
  }

  @Override
  public void onAfterDelete(Object entity) {
    ... send a message that this entity has been deleted
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>One thing to note with this approach, however, is that it makes no distinction based on the type of the entity. You have to inspect that yourself.</p>
</div>
</div>
<div class="sect2">
<h3>10.2. Writing an Annotated Handler</h3>
<div class="paragraph">
<p>Another approach is to use an annotated handler, which filters events based on domain type.</p>
</div>
<div class="paragraph">
<p>To declare a handler, create a POJO and put the <code>@RepositoryEventHandler</code> annotation on it. This tells the <code>BeanPostProcessor</code> that this class needs to be inspected for handler methods.</p>
</div>
<div class="paragraph">
<p>Once the <code>BeanPostProcessor</code> finds a bean with this annotation, it iterates over the exposed methods and looks for annotations that correspond to the event in question. For example, to handle <code>BeforeSaveEvent</code> instances in an annotated POJO for different kinds of domain types, you could define your class as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryEventHandler <i class="conum" data-value="1"></i><b>(1)</b>
public class PersonEventHandler {

  @HandleBeforeSave
  public void handlePersonSave(Person p) {
    // … you can now deal with Person in a type-safe way
  }

  @HandleBeforeSave
  public void handleProfileSave(Profile p) {
    // … you can now deal with Profile in a type-safe way
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>It&#8217;s possible to narrow the types to which this handler applies by using (for example) <code>@RepositoryEventHandler(Person.class)</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The domain type whose events you are interested in is determined from the type of the first parameter of the annotated methods.</p>
</div>
<div class="paragraph">
<p>To register your event handler, either mark the class with one of Spring&#8217;s <code>@Component</code> stereotypes (so that it can be picked up by <code>@SpringBootApplication</code> or <code>@ComponentScan</code>) or declare an instance of your annotated bean in your <code>ApplicationContext</code>. Then the <code>BeanPostProcessor</code> that is created in <code>RepositoryRestMvcConfiguration</code> inspects the bean for handlers and wires them to the correct events. The following example shows how to create an event handler for the <code>Person</code> class:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Configuration
public class RepositoryConfiguration {

  @Bean
  PersonEventHandler personEventHandler() {
    return new PersonEventHandler();
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Spring Data REST events are customized <a href="https://docs.spring.io/spring/docs/5.3.1/spring-framework-reference/core.html#context-functionality-events">Spring application events</a>. By default, Spring events are synchronous, unless they get republished across a boundary (such as issuing a WebSocket event or crossing into a thread).
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="integration"><a class="anchor" href="index.html#integration"></a>11. Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section details various ways to integrate with Spring Data REST components, whether from a Spring application that is using Spring Data REST or from other means.</p>
</div>
<div class="sect2">
<h3>11.1. Programmatic Links</h3>
<div class="paragraph">
<p>Sometimes you need to add links to exported resources in your own custom-built Spring MVC controllers. There are three basic levels of linking available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Manually assembling links.</p>
</li>
<li>
<p>Using Spring HATEOAS&#8217;s <a href="../../../../../../spring-hateoas/docs/current/reference/html/index.html#fundamentals.obtaining-links.builder"><code>LinkBuilder</code></a> with <code>linkTo()</code>, <code>slash()</code>, and so on.</p>
</li>
<li>
<p>Using Spring Data REST&#8217;s implementation of <a href="../../api/org/springframework/data/rest/webmvc/support/RepositoryEntityLinks.html"><code>RepositoryEntityLinks</code></a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first suggestion is terrible and should be avoided at all costs. It makes your code brittle and high-risk. The second is handy when creating links to other hand-written Spring MVC controllers. The last one, which we explore in the rest of this section, is good for looking up resource links that are exported by Spring Data REST.</p>
</div>
<div class="paragraph">
<p>Consider the following class ,which uses Spring&#8217;s autowiring:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyWebApp {

	private RepositoryEntityLinks entityLinks;

	@Autowired
	public MyWebApp(RepositoryEntityLinks entityLinks) {
		this.entityLinks = entityLinks;
	}
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With the class in the preceding example, you can use the following operations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Ways to link to exported resources</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entityLinks.linkToCollectionResource(Person.class)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provide a link to the collection resource of the specified type (<code>Person</code>, in this case).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entityLinks.linkToSingleResource(Person.class, 1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provide a link to a single resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entityLinks.linkToPagedResource(Person.class, new PageRequest(&#8230;&#8203;))</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provide a link to a paged resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entityLinks.linksToSearchResources(Person.class)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a list of links for all the finder methods exposed by the corresponding repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entityLinks.linkToSearchResource(Person.class, "findByLastName")</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provide a finder link by <code>rel</code> (that is, the name of the finder).</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All of the search-based links support extra parameters for paging and sorting. See <a href="../../api/org/springframework/data/rest/webmvc/support/RepositoryEntityLinks.html"><code>RepositoryEntityLinks</code></a> for the details. There is also <code>linkFor(Class&lt;?&gt; type)</code>, but that returns a Spring HATEOAS <code>LinkBuilder</code>, which returns you to the lower level API. Try to use the other ones first.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metadata"><a class="anchor" href="index.html#metadata"></a>12. Metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section details the various forms of metadata provided by a Spring Data REST-based application.</p>
</div>
<div class="sect2">
<h3 id="metadata.alps"><a class="anchor" href="index.html#metadata.alps"></a>12.1. Application-Level Profile Semantics (ALPS)</h3>
<div class="quoteblock">
<blockquote>
<a href="http://alps.io/">ALPS</a> is a data format for defining simple descriptions of application-level semantics, similar in complexity to HTML microformats. An ALPS document can be used as a profile to explain the application semantics of a document with an application-agnostic media type (such as HTML, HAL, Collection+JSON, Siren, etc.). This increases the reusability of profile documents across media types.
</blockquote>
<div class="attribution">
&#8212; M. Admundsen / L. Richardson / M. Foster<br>
<cite>https://tools.ietf.org/html/draft-amundsen-richardson-foster-alps-00</cite>
</div>
</div>
<div class="paragraph">
<p>Spring Data REST provides an ALPS document for every exported repository. It contains information about both the RESTful transitions
and the attributes of each repository.</p>
</div>
<div class="paragraph">
<p>At the root of a Spring Data REST app is a profile link. Assuming you had an app with both <code>persons</code> and related <code>addresses</code>, the root
document would be as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "persons" : {
      "href" : "http://localhost:8080/persons"
    },
    "addresses" : {
      "href" : "http://localhost:8080/addresses"
    },
    "profile" : {
      "href" : "http://localhost:8080/profile"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A profile link, as defined in <a href="https://tools.ietf.org/html/rfc6906">RFC 6906</a>, is a place to include application-level details. The
<a href="https://tools.ietf.org/html/draft-amundsen-richardson-foster-alps-00">ALPS draft spec</a> is meant to define a particular profile format,
which we explore later in this section.</p>
</div>
<div class="paragraph">
<p>If you navigate into the profile link at <code>localhost:8080/profile</code>, you see content resembling the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/profile"
    },
    "persons" : {
      "href" : "http://localhost:8080/profile/persons"
    },
    "addresses" : {
      "href" : "http://localhost:8080/profile/addresses"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
At the root level, <code>profile</code> is a single link and cannot serve up more than one application profile. That
is why you must navigate to <code>/profile</code> to find a link for each resource&#8217;s metadata.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you navigate to <code>/profile/persons</code> and look at the profile data for a <code>Person</code> resource, you see content resembling the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "version" : "1.0",
  "descriptors" : [ {
    "id" : "person-representation", <i class="conum" data-value="1"></i><b>(1)</b>
    "descriptors" : [ {
      "name" : "firstName",
      "type" : "SEMANTIC"
    }, {
      "name" : "lastName",
      "type" : "SEMANTIC"
    }, {
      "name" : "id",
      "type" : "SEMANTIC"
    }, {
      "name" : "address",
      "type" : "SAFE",
      "rt" : "http://localhost:8080/profile/addresses#address"
    } ]
  }, {
    "id" : "create-persons", <i class="conum" data-value="2"></i><b>(2)</b>
    "name" : "persons", <i class="conum" data-value="3"></i><b>(3)</b>
    "type" : "UNSAFE", <i class="conum" data-value="4"></i><b>(4)</b>
    "rt" : "#person-representation" <i class="conum" data-value="5"></i><b>(5)</b>
  }, {
    "id" : "get-persons",
    "name" : "persons",
    "type" : "SAFE",
    "rt" : "#person-representation"
  }, {
    "id" : "delete-person",
    "name" : "person",
    "type" : "IDEMPOTENT",
    "rt" : "#person-representation"
  }, {
    "id" : "patch-person",
    "name" : "person",
    "type" : "UNSAFE",
    "rt" : "#person-representation"
  }, {
    "id" : "update-person",
    "name" : "person",
    "type" : "IDEMPOTENT",
    "rt" : "#person-representation"
  }, {
    "id" : "get-person",
    "name" : "person",
    "type" : "SAFE",
    "rt" : "#person-representation"
  } ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A detailed listing of the attributes of a <code>Person</code> resource, identified as <code>#person-representation</code>, lists the names
of the attributes.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The supported operations. This one indicates how to create a new <code>Person</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>name</code> is <code>persons</code>, which indicates (because it is plural) that a POST should be applied to the whole collection, not a single <code>person</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>type</code> is <code>UNSAFE</code>, because this operation can alter the state of the system.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This JSON document has a media type of <code>application/alps+json</code>. This is different from the previous JSON document, which had
a media type of <code>application/hal+json</code>. These formats are different and governed by different specs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also find a <code>profile</code> link in the collection of <code>_links</code> when you examine a collection resource, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons" <i class="conum" data-value="1"></i><b>(1)</b>
    },
    ... other links ...
    "profile" : {
      "href" : "http://localhost:8080/profile/persons" <i class="conum" data-value="2"></i><b>(2)</b>
    }
  },
  ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This HAL document respresents the <code>Person</code> collection.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It has a <strong>profile</strong> link to the same URI for metadata.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Again, by default, the <code>profile</code> link serves up ALPS. However, if you use an <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1"><code>Accept</code> header</a>, it can serve <code>application/alps+json</code>.</p>
</div>
<div class="sect3">
<h4 id="metadata.alps.control-types"><a class="anchor" href="index.html#metadata.alps.control-types"></a>12.1.1. Hypermedia Control Types</h4>
<div class="paragraph">
<p>ALPS displays types for each hypermedia control. They include:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. ALPS types</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEMANTIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A state element (such as <code>HTML.SPAN</code>, <code>HTML.INPUT</code>, and others).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAFE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A hypermedia control that triggers a safe, idempotent state transition (such as <code>GET</code> or <code>HEAD</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDEMPOTENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A hypermedia control that triggers an unsafe, idempotent state transition (such as <code>PUT</code> or <code>DELETE</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNSAFE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A hypermedia control that triggers an unsafe, non-idempotent state transition (such as <code>POST</code>).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In the representation section shown earlier, bits of data from the application are marked as being <code>SEMANTIC</code>. The <code>address</code> field
is a link that involves a safe <code>GET</code> to retrieve. Consequently, it is marked as being <code>SAFE</code>. Hypermedia operations themselves map onto the types as
shown in the preceding table.</p>
</div>
</div>
<div class="sect3">
<h4 id="metadata.alps.projections"><a class="anchor" href="index.html#metadata.alps.projections"></a>12.1.2. ALPS with Projections</h4>
<div class="paragraph">
<p>If you define any projections, they are also listed in the ALPS metadata. Assuming we also defined <code>inlineAddress</code> and <code>noAddresses</code>, they
would appear inside the relevant operations. (See &#8220;<a href="index.html#projections-excerpts.projections">Projections</a>&#8221; for the definitions and discussion of these two projections.) That is <strong>GET</strong> would appear in the operations for the whole collection, and <strong>GET</strong> would appear in the operations for a single resource. The following example shows
the alternate version of the <code>get-persons</code> subsection:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">...
  {
    "id" : "get-persons",
    "name" : "persons",
    "type" : "SAFE",
    "rt" : "#person-representation",
    "descriptors" : [ { <i class="conum" data-value="1"></i><b>(1)</b>
      "name" : "projection",
      "doc" : {
        "value" : "The projection that shall be applied when rendering the response. Acceptable values available in nested descriptors.",
        "format" : "TEXT"
      },
      "type" : "SEMANTIC",
      "descriptors" : [ {
        "name" : "inlineAddress", <i class="conum" data-value="2"></i><b>(2)</b>
        "type" : "SEMANTIC",
        "descriptors" : [ {
          "name" : "address",
          "type" : "SEMANTIC"
        }, {
          "name" : "firstName",
          "type" : "SEMANTIC"
        }, {
          "name" : "lastName",
          "type" : "SEMANTIC"
        } ]
      }, {
        "name" : "noAddresses", <i class="conum" data-value="3"></i><b>(3)</b>
        "type" : "SEMANTIC",
        "descriptors" : [ {
          "name" : "firstName",
          "type" : "SEMANTIC"
        }, {
          "name" : "lastName",
          "type" : "SEMANTIC"
        } ]
      } ]
    } ]
  }
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A new attribute, <code>descriptors</code>, appears, containing an array with one entry, <code>projection</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Inside the <code>projection.descriptors</code>, we can see <code>inLineAddress</code>. It render <code>address</code>, <code>firstName</code>, and <code>lastName</code>.
Relationships rendered inside a projection result in including the data fields inline.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>noAddresses</code> serves up a subset that contains <code>firstName</code> and <code>lastName</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>With all this information, a client can deduce not only the available RESTful transitions but also, to some degree, the
data elements needed to interact with the back end.</p>
</div>
</div>
<div class="sect3">
<h4 id="metadata.alps.descriptions"><a class="anchor" href="index.html#metadata.alps.descriptions"></a>12.1.3. Adding Custom Details to Your ALPS Descriptions</h4>
<div class="paragraph">
<p>You can create custom messages that appear in your ALPS metadata. To do so, create <code>rest-messages.properties</code>, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">rest.description.person=A collection of people
rest.description.person.id=primary key used internally to store a person (not for RESTful usage)
rest.description.person.firstName=Person's first name
rest.description.person.lastName=Person's last name
rest.description.person.address=Person's address</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>These <code>rest.description.*</code> properties define details to display for a <code>Person</code> resource. They alter the ALPS format of the <code>person-representation</code>, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">...
  {
    "id" : "person-representation",
    "doc" : {
      "value" : "A collection of people", <i class="conum" data-value="1"></i><b>(1)</b>
      "format" : "TEXT"
    },
    "descriptors" : [ {
      "name" : "firstName",
      "doc" : {
        "value" : "Person's first name", <i class="conum" data-value="2"></i><b>(2)</b>
        "format" : "TEXT"
      },
      "type" : "SEMANTIC"
    }, {
      "name" : "lastName",
      "doc" : {
        "value" : "Person's last name", <i class="conum" data-value="3"></i><b>(3)</b>
        "format" : "TEXT"
      },
      "type" : "SEMANTIC"
    }, {
      "name" : "id",
      "doc" : {
        "value" : "primary key used internally to store a person (not for RESTful usage)", <i class="conum" data-value="4"></i><b>(4)</b>
        "format" : "TEXT"
      },
      "type" : "SEMANTIC"
    }, {
      "name" : "address",
      "doc" : {
        "value" : "Person's address", <i class="conum" data-value="5"></i><b>(5)</b>
        "format" : "TEXT"
      },
      "type" : "SAFE",
      "rt" : "http://localhost:8080/profile/addresses#address"
    } ]
  }
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The value of <code>rest.description.person</code> maps into the whole representation.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The value of <code>rest.description.person.firstName</code> maps to the <code>firstName</code> attribute.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The value of <code>rest.description.person.lastName</code> maps to the <code>lastName</code> attribute.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The value of <code>rest.description.person.id</code> maps to the <code>id</code> attribute, a field not normally displayed.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The value of <code>rest.description.person.address</code> maps to the <code>address</code> attribute.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Supplying these property settings causes each field to have an extra <code>doc</code> attribute.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Spring MVC (which is the essence of a Spring Data REST application) supports locales, meaning you can bundle up multiple
properties files with different messages.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="metadata.json-schema"><a class="anchor" href="index.html#metadata.json-schema"></a>12.2. JSON Schema</h3>
<div class="paragraph">
<p><a href="https://json-schema.org/">JSON Schema</a> is another form of metadata supported by Spring Data REST. Per their website, JSON Schema has the following advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Describes your existing data format</p>
</li>
<li>
<p>Clear, human- and machine-readable documentation</p>
</li>
<li>
<p>Complete structural validation, useful for automated testing and validating client-submitted data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As shown in the <a href="index.html#metadata.alps">previous section</a>, you can reach this data by navigating from the root URI to the <code>profile</code> link.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/profile"
    },
    "persons" : {
      "href" : "http://localhost:8080/profile/persons"
    },
    "addresses" : {
      "href" : "http://localhost:8080/profile/addresses"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>These links are the same as shown earlier. To retrieve JSON Schema, you can invoke them with the following <code>Accept</code> header: <code>application/schema+json</code>.</p>
</div>
<div class="paragraph">
<p>In this case, if you executed <code>curl -H 'Accept:application/schema+json' <a href="http://localhost:8080/profile/persons" class="bare">http://localhost:8080/profile/persons</a></code>, you would see output resembling the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "title" : "org.springframework.data.rest.webmvc.jpa.Person", <i class="conum" data-value="1"></i><b>(1)</b>
  "properties" : { <i class="conum" data-value="2"></i><b>(2)</b>
    "firstName" : {
      "readOnly" : false,
      "type" : "string"
    },
    "lastName" : {
      "readOnly" : false,
      "type" : "string"
    },
    "siblings" : {
      "readOnly" : false,
      "type" : "string",
      "format" : "uri"
    },
    "created" : {
      "readOnly" : false,
      "type" : "string",
      "format" : "date-time"
    },
    "father" : {
      "readOnly" : false,
      "type" : "string",
      "format" : "uri"
    },
    "weight" : {
      "readOnly" : false,
      "type" : "integer"
    },
    "height" : {
      "readOnly" : false,
      "type" : "integer"
    }
  },
  "descriptors" : { },
  "type" : "object",
  "$schema" : "https://json-schema.org/draft-04/schema#"
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The type that was exported</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A listing of properties</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>There are more details if your resources have links to other resources.</p>
</div>
<div class="paragraph">
<p>You can also find a <code>profile</code> link in the collection of <code>_links</code> when you examine a collection resource, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/persons" <i class="conum" data-value="1"></i><b>(1)</b>
    },
    ... other links ...
    "profile" : {
      "href" : "http://localhost:8080/profile/persons" <i class="conum" data-value="2"></i><b>(2)</b>
    }
  },
  ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This HAL document respresents the <code>Person</code> collection.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It has a <strong>profile</strong> link to the same URI for metadata.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Again, the <code>profile</code> link serves <a href="index.html#metadata.alps">ALPS</a> by default. If you supply it with an <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1"><code>Accept</code> header</a> of <code>application/schema+json</code>, it renders the JSON Schema representation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="anchor" href="index.html#security"></a>13. Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Data REST works quite well with Spring Security. This section shows examples of how to secure your Spring Data REST services with method-level security.</p>
</div>
<div class="sect2">
<h3 id="security.pre-and-post"><a class="anchor" href="index.html#security.pre-and-post"></a>13.1. <code>@Pre</code> and <code>@Post</code> Security</h3>
<div class="paragraph">
<p>The following example from Spring Data REST&#8217;s test suite shows Spring Security&#8217;s <a href="../../../../../../spring-security/site/docs/current/reference/htmlsingle/index.html#el-pre-post-annotations">PreAuthorization model</a> (the most sophisticated security model):</p>
</div>
<div class="exampleblock">
<div class="title">Example 7. spring-data-rest-tests/spring-data-rest-tests-security/src/test/java/org/springframework/data/rest/tests/security/PreAuthorizedOrderRepository.java</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("hasRole('ROLE_USER')") <i class="conum" data-value="1"></i><b>(1)</b>
public interface PreAuthorizedOrderRepository extends CrudRepository&lt;Order, UUID&gt; {

	@PreAuthorize("hasRole('ROLE_ADMIN')") <i class="conum" data-value="2"></i><b>(2)</b>
	@Override
	void deleteById(UUID aLong);

	@PreAuthorize("hasRole('ROLE_ADMIN')")
	@Override
	void delete(Order order);

	@PreAuthorize("hasRole('ROLE_ADMIN')")
	@Override
	void deleteAll(Iterable&lt;? extends Order&gt; orders);

	@PreAuthorize("hasRole('ROLE_ADMIN')")
	@Override
	void deleteAll();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This Spring Security annotation secures the entire repository. The <a href="../../../../../../spring-security/site/docs/current/reference/htmlsingle/index.html#el-common-built-in">Spring Security SpEL expression</a> indicates that the principal must have <code>ROLE_USER</code> in its collection of roles.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>To change method-level settings, you must override the method signature and apply a Spring Security annotation. In this case, the method overrides the repository-level settings with the requirement that the user have <code>ROLE_ADMIN</code> to perform a delete.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding example shows a standard Spring Data repository definition extending <code>CrudRepository</code> with some key changes: the specification of particular roles to access the various methods:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Repository and method level security settings do not combine. Instead, method-level settings override repository level settings.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The previous example illustrates that <code>CrudRepository</code>, in fact, has four delete methods. You must override all delete methods to properly secure it.</p>
</div>
</div>
<div class="sect2">
<h3 id="security.secured"><a class="anchor" href="index.html#security.secured"></a>13.2. @Secured security</h3>
<div class="paragraph">
<p>The following example shows Spring Security&#8217;s older <code>@Secured</code> annotation, which is purely role-based:</p>
</div>
<div class="exampleblock">
<div class="title">Example 8. spring-data-rest-tests/spring-data-rest-tests-security/src/test/java/org/springframework/data/rest/tests/security/SecuredPersonRepository.java</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Secured("ROLE_USER") <i class="conum" data-value="1"></i><b>(1)</b>
@RepositoryRestResource(collectionResourceRel = "people", path = "people")
public interface SecuredPersonRepository extends CrudRepository&lt;Person, UUID&gt; {

	@Secured("ROLE_ADMIN") <i class="conum" data-value="2"></i><b>(2)</b>
	@Override
	void deleteById(UUID aLong);

	@Secured("ROLE_ADMIN")
	@Override
	void delete(Person person);

	@Secured("ROLE_ADMIN")
	@Override
	void deleteAll(Iterable&lt;? extends Person&gt; persons);

	@Secured("ROLE_ADMIN")
	@Override
	void deleteAll();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This results in the same security check as the previous example but has less flexibility. It allows only roles as the means to restrict access.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Again, this shows that delete methods require <code>ROLE_ADMIN</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you start with a new project or first apply Spring Security, <code>@PreAuthorize</code> is the recommended solution. If are already using Spring Security with <code>@Secured</code> in other parts of your app, you can continue on that path without rewriting everything.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="security.enable-method-level"><a class="anchor" href="index.html#security.enable-method-level"></a>13.3. Enabling Method-level Security</h3>
<div class="paragraph">
<p>To configure method-level security, here is a brief snippet from Spring Data REST&#8217;s test suite:</p>
</div>
<div class="exampleblock">
<div class="title">Example 9. spring-data-rest-tests/spring-data-rest-tests-security/src/test/java/org/springframework/data/rest/tests/security/SecurityConfiguration.java</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Configuration <i class="conum" data-value="1"></i><b>(1)</b>
@EnableWebSecurity
@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true) <i class="conum" data-value="2"></i><b>(2)</b>
public class SecurityConfiguration extends WebSecurityConfigurerAdapter { <i class="conum" data-value="3"></i><b>(3)</b>
	...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is a Spring configuration class.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It uses Spring Security&#8217;s <code>@EnableGlobalMethodSecurity</code> annotation to enable both <code>@Secured</code> and <code>@Pre</code>/<code>@Post</code> support. NOTE: You don&#8217;t have to use both. This particular case is used to prove both versions work with Spring Data REST.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This class extends Spring Security&#8217;s <code>WebSecurityConfigurerAdapter</code> which is used for pure Java configuration of security.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The rest of the configuration class is not listed, because it follows <a href="../../../../../../spring-security/site/docs/current/reference/htmlsingle/index.html#hello-web-security-java-configuration">standard practices</a> that you can read about in the Spring Security reference docs.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tools"><a class="anchor" href="index.html#tools"></a>14. Tools</h2>
<div class="sectionbody">
<div class="sect2">
<h3>14.1. The HAL Browser</h3>
<div class="paragraph">
<p>The developer of the <a href="http://stateless.co/hal_specification.html">HAL specification</a> has a useful application: <a href="https://github.com/mikekelly/hal-browser">the HAL Browser</a>. It is a web application that stirs in a little HAL-powered JavaScript. You can point it at any Spring Data REST API and use it to navigate the app and create new resources.</p>
</div>
<div class="paragraph">
<p>Instead of pulling down the files, embedding them in your application, and crafting a Spring MVC controller to serve them up, all you need to do is add a single dependency.</p>
</div>
<div class="paragraph">
<p>The following listing shows how to add the dependency in Maven:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
        &lt;artifactId&gt;spring-data-rest-hal-browser&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following listing shows how to add the dependency in Gradle:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">dependencies {
    compile 'org.springframework.data:spring-data-rest-hal-browser'
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you use Spring Boot or the Spring Data BOM (bill of materials), you do not need to specify the version.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This dependency auto-configures the HAL Browser to be served up when you visit your application&#8217;s root URI in a browser. (NOTE: <a href="http://localhost:8080" class="bare">http://localhost:8080</a> was plugged into the browser, and it redirected to the URL shown in the following image.)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hal-browser-1.png" alt="hal browser 1">
</div>
</div>
<div class="paragraph">
<p>The preceding screen shot shows the root path of the API. On the right side are details from the response, including headers and the body (a HAL document).</p>
</div>
<div class="paragraph">
<p>The HAL Browser reads the links from the response and puts them in a list on the left side. You can either click on the <strong>GET</strong> button and navigate to one of the collections, or click on the <strong>NON-GET</strong> option to make changes.</p>
</div>
<div class="paragraph">
<p>The HAL Browser speaks <strong>URI Template</strong>. Above the <strong>GET</strong> button and next to <strong>persons</strong>, the UI has a question mark icon. An expansion dialog pops up if you choose to navigate to it, as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hal-browser-3.png" alt="hal browser 3">
</div>
</div>
<div class="paragraph">
<p>If you click <strong>Follow URI</strong> without entering anything, the variables are essentially ignored. For situations like <a href="index.html#projections-excerpts">Projections and Excerpts</a> or <a href="index.html#paging-and-sorting">Paging and Sorting</a>, this can be useful.</p>
</div>
<div class="paragraph">
<p>When you click on a <strong>NON-GET</strong> button, a pop-up dialog appears. By default, it shows <strong>POST</strong>. This field can be adjusted to either <strong>PUT</strong> or <strong>PATCH</strong>. The headers are filled out to properly to submit a new JSON document.</p>
</div>
<div class="paragraph">
<p>Below the URI, method, and headers are the fields. These are automatically supplied, depending on the metadata of the resources, which was automatically generated by Spring Data REST. If you update your domain objects, the pop-up reflects it, as the following image shows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hal-browser-2.png" alt="hal browser 2" height="150">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customizing-sdr"><a class="anchor" href="index.html#customizing-sdr"></a>15. Customizing Spring Data REST</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are many options to tailor Spring Data REST. These subsections show how.</p>
</div>
<div class="sect2">
<h3>15.1. Customizing Item Resource URIs</h3>
<div class="paragraph">
<p>By default, the URI for item resources are comprised of the path segment used for the collection resource with the database identifier appended.
That lets you use the repository&#8217;s <code>findOne(…)</code> method to lookup entity instances.
As of Spring Data REST 2.5, this can be customized by using configuration API on <code>RepositoryRestConfiguration</code> (preferred on Java 8) or by registering an implementation of <code>EntityLookup</code> as a Spring bean in your application.
Spring Data REST picks those up and tweaks the URI generation according to their implementation.</p>
</div>
<div class="paragraph">
<p>Assume a <code>User</code> with a <code>username</code> property that uniquely identifies it.
Further assume that we have a <code>Optional&lt;User&gt; findByUsername(String username)</code> method on the corresponding repository.</p>
</div>
<div class="paragraph">
<p>On Java 8, we can register the mapping methods as method references to tweak the URI creation, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component
public class SpringDataRestCustomization implements RepositoryRestConfigurer {

  @Override
  public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {
    config.withEntityLookup()
      .forRepository(UserRepository.class)
      .withIdMapping(User::getUsername)
      .withLookup(UserRepository::findByUsername);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><code>forRepository(…)</code> takes the repository type as the first argument, a method reference mapping the repositories domain type to some target type as the second argument, and another method reference to map that value back by using the repository mentioned as the first argument.</p>
</div>
<div class="paragraph">
<p>If you are not running Java 8 or better, you could use the method, but it would require a few quite verbose anonymous inner classes.
On older Java versions, you should probably prefer implementing a <code>UserEntityLookup</code> that resembles the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component
public class UserEntityLookup extends EntityLookupSupport&lt;User&gt; {

    private final UserRepository repository;

    public UserEntityLookup(UserRepository repository) {
        this.repository = repository;
    }

    @Override
    public Serializable getResourceIdentifier(User entity) {
        return entity.getUsername();
    }

    @Override
    public Object lookupEntity(Serializable id) {
        return repository.findByUsername(id.toString());
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Notice how <code>getResourceIdentifier(…)</code> returns the username to be used by the URI creation. To load entity instances by the value returned from that method, we now implement <code>lookupEntity(…)</code> by using the query method available on the <code>UserRepository</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="customizing-sdr.repository-exposure"><a class="anchor" href="index.html#customizing-sdr.repository-exposure"></a>15.2. Customizing repository exposure</h3>
<div class="paragraph">
<p>By default, all public Spring Data repositories are used to expose HTTP resources as described in <a href="index.html#repository-resources">Repository resources</a>.
Package protected repository interfaces are excluded from this list, as you express its functionality is only visible to the package internally.
This can be customized by explicitly setting a <code>RepositoryDetectionStrategy</code> (usually through the enum <code>RepositoryDetectionStrategies</code>) on <code>RepositoryRestConfiguration</code>.
The following values can be configured:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ALL</code>&#8201;&#8212;&#8201;exposes all Spring Data repositories regardless of their Java visibility or annotation configuration.</p>
</li>
<li>
<p><code>DEFAULT</code>&#8201;&#8212;&#8201;exposes public Spring Data repositories or ones explicitly annotated with <code>@RepositoryRestResource</code> and its <code>exported</code> attribute not set to <code>false</code>.</p>
</li>
<li>
<p><code>VISIBILITY</code>&#8201;&#8212;&#8201;exposes only public Spring Data repositories regardless of annotation configuration.</p>
</li>
<li>
<p><code>ANNOTATED</code>&#8201;&#8212;&#8201;only exposes Spring Data repositories explicitly annotated with <code>@RepositoryRestResource</code> and its <code>exported</code> attribute not set to <code>false</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you need custom rules to apply, simply implement <code>RepositoryDetectionStrategy</code> manually.</p>
</div>
</div>
<div class="sect2">
<h3 id="customizing-sdr.http-methods"><a class="anchor" href="index.html#customizing-sdr.http-methods"></a>15.3. Customizing supported HTTP methods</h3>
<div class="sect3">
<h4 id="customizing-sdr.http-methods.default-exposure"><a class="anchor" href="index.html#customizing-sdr.http-methods.default-exposure"></a>15.3.1. Customizing default exposure</h4>
<div class="paragraph">
<p>By default, Spring Data REST exposes HTTP resources and methods as described in <a href="index.html#repository-resources">Repository resources</a> based on which CRUD methods the repository exposes.
The repositories don&#8217;t need to extend <code>CrudRepository</code> but can also selectively declare methods described in aforementioned section and the resource exposure will follow.
E.g. if a repository does not expose a <code>delete(…)</code> method, an HTTP <code>DELETE</code> will not be supported for item resources.</p>
</div>
<div class="paragraph">
<p>If you need to declare a method for internal use but don&#8217;t want it to trigger the HTTP method exposure, the repository method can be annotated with <code>@RestResource(exported = false)</code>.
Which methods to annotate like that to remove support for which HTTP method is described in <a href="index.html#repository-resources">Repository resources</a>.</p>
</div>
<div class="paragraph">
<p>Sometimes managing the exposure on the method level is not fine-grained enough.
E.g. the <code>save(…)</code> method is used to back <code>POST</code> on collection resources, as well as <code>PUT</code> and <code>PATCH</code> on item resources.
To selectively define which HTTP methods are supposed to be exposed, you can use <code>RepositoryRestConfiguration.getExposureConfiguration()</code>.</p>
</div>
<div class="paragraph">
<p>The class exposes a Lambda based API to define both global and type-based rules:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">ExposureConfiguration config = repositoryRestConfiguration.getExposureConfiguration();

config.forDomainType(User.class).disablePutForCreation(); <i class="conum" data-value="1"></i><b>(1)</b>
config.withItemExposure((metadata, httpMethods) -&gt; httpMethods.disable(HttpMethod.PATCH)); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Disables the support for HTTP <code>PUT</code> to create item resources directly.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Disables the support for HTTP <code>PATCH</code> on all item resources.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customizing-sdr.configuring-the-rest-url-path"><a class="anchor" href="index.html#customizing-sdr.configuring-the-rest-url-path"></a>15.4. Configuring the REST URL Path</h3>
<div class="paragraph">
<p>You can configure the segments of the URL path under which the resources of a JPA repository are exported. To do so, add an annotation at the class level or at the query method level.</p>
</div>
<div class="paragraph">
<p>By default, the exporter exposes your <code>CrudRepository</code> by using the name of the domain class. Spring Data REST also applies the <a href="https://github.com/atteo/evo-inflector">Evo Inflector</a> to pluralize this word. Consider the following repository definition:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The repository defined by the preceding example is exposed at <code><a href="http://localhost:8080/persons/" class="bare">http://localhost:8080/persons/</a></code>.</p>
</div>
<div class="paragraph">
<p>To change how the repository is exported, add a <code>@RestResource</code> annotation at the class level, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(path = "people")
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The repository defined by the preceding example is accessible at <code><a href="http://localhost:8080/people/" class="bare">http://localhost:8080/people/</a></code>.</p>
</div>
<div class="paragraph">
<p>If you have query methods defined, those also default to being exposed by their name, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {

  List&lt;Person&gt; findByName(String name);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The method in the preceding example is exposed at <code><a href="http://localhost:8080/persons/search/findByName" class="bare">http://localhost:8080/persons/search/findByName</a></code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All query method resources are exposed under the <code>search</code> resource.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To change the segment of the URL under which this query method is exposed, you can use the <code>@RestResource</code> annotation again, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(path = "people")
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {

  @RestResource(path = "names")
  List&lt;Person&gt; findByName(String name);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Now the query method in the preceding example is exposed at <code><a href="http://localhost:8080/people/search/names" class="bare">http://localhost:8080/people/search/names</a></code>.</p>
</div>
<div class="sect3">
<h4>15.4.1. Handling <code>rel</code> Attributes</h4>
<div class="paragraph">
<p>Since these resources are all discoverable, you can also affect how the <code>rel</code> attribute is displayed in the links sent out by the exporter.</p>
</div>
<div class="paragraph">
<p>For instance, in the default configuration, if you issue a request to <code><a href="http://localhost:8080/persons/search" class="bare">http://localhost:8080/persons/search</a></code> to find out what query methods are exposed, you get back a list of links similar to the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "findByName" : {
      "href" : "http://localhost:8080/persons/search/findByName"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To change the <code>rel</code> value, use the <code>rel</code> property on the <code>@RestResource</code> annotation, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(path = "people")
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {

  @RestResource(path = "names", rel = "names")
  List&lt;Person&gt; findByName(String name);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding example results in the following link value:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "names" : {
      "href" : "http://localhost:8080/persons/search/names"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These snippets of JSON assume you use Spring Data REST&#8217;s default format of <a href="http://stateless.co/hal_specification.html">HAL</a>. You can turn off HAL, which would cause the output to look different. However, your ability to override <code>rel</code> names is totally independent of the rendering format.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can change the <code>rel</code> of a repository, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(path = "people", rel = "people")
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {

  @RestResource(path = "names", rel = "names")
  List&lt;Person&gt; findByName(String name);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Altering the <code>rel</code> of a repository changes the top-level name, as the following example output shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "people" : {
      "href" : "http://localhost:8080/people"
    },
    …
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the top level fragment shown in the preceding output:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>path = "people"</code> changed the value in <code>href</code> from <code>/persons</code> to <code>/people</code>.</p>
</li>
<li>
<p><code>rel = "people"</code> changed the name of that link from <code>persons</code> to <code>people</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you navigate to the <code>search</code> resource of this repository, the finder method&#8217;s <code>@RestResource</code> annotation has altered the path, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
  "_links" : {
    "names" : {
      "href" : "http://localhost:8080/people/search/names"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This collection of annotations in your repository definition has caused the following changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Repository-level annotation&#8217;s <code>path = "people"</code> is reflected in the base URI with <code>/people</code>.</p>
</li>
<li>
<p>The inclusion of a finder method provides you with <code>/people/search</code>.</p>
</li>
<li>
<p><code>path = "names"</code> creates a URI of <code>/people/search/names</code>.</p>
</li>
<li>
<p><code>rel = "names"</code> changes the name of that link from <code>findByNames</code> to <code>names</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="customizing-sdr.hiding-repositories"><a class="anchor" href="index.html#customizing-sdr.hiding-repositories"></a>15.4.2. Hiding Certain Repositories, Query Methods, or Fields</h4>
<div class="paragraph">
<p>You may not want a certain repository, a query method on a repository, or a field of your entity to be exported at all. Examples include hiding fields like <code>password</code> on a <code>User</code> object and similar sensitive data. To tell the exporter to not export these items, annotate them with <code>@RestResource</code> and set <code>exported = false</code>.</p>
</div>
<div class="paragraph">
<p>For example, to skip exporting a repository, you could create a repository definition similar to the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(exported = false)
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To skip exporting a query method, you can annotate the query method with <code>@RestResource(exported = false)</code>, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(path = "people", rel = "people")
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {

  @RestResource(exported = false)
  List&lt;Person&gt; findByName(String name);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Similarly, to skip exporting a field, you can annotate the field with <code>@RestResource(exported = false)</code>, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class Person {

  @Id @GeneratedValue private Long id;

  @OneToMany
  @RestResource(exported = false)
  private Map&lt;String, Profile&gt; profiles;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Projections provide the means to change what is exported and effectively <a href="index.html#projections-excerpts.hidden-data">side-step these settings</a>. If you create any projections against the same domain object, be sure to NOT export the fields.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="customizing-sdr.hiding-repository-crud-methods"><a class="anchor" href="index.html#customizing-sdr.hiding-repository-crud-methods"></a>15.4.3. Hiding Repository CRUD Methods</h4>
<div class="paragraph">
<p>If you do not want to expose a save or delete method on your <code>CrudRepository</code>, you can use the <code>@RestResource(exported = false)</code> setting by overriding the method you want to turn off and placing the annotation on the overridden version. For example, to prevent HTTP users from invoking the delete methods of <code>CrudRepository</code>, override all of them and add the annotation to the overridden methods, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestResource(path = "people", rel = "people")
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {

  @Override
  @RestResource(exported = false)
  void delete(Long id);

  @Override
  @RestResource(exported = false)
  void delete(Person entity);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
It is important that you override <em>both</em> <code>delete</code> methods. In the interest of faster runtime performance, the exporter currently uses a somewhat naive algorithm for determining which CRUD method to use. You cannot currently turn off the version of <code>delete</code> that takes an ID but export the version that takes an entity instance. For the time being, you can either export the <code>delete</code> methods or not. If you want turn them off, keep in mind that you have to annotate both versions with <code>exported = false</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customizing-sdr.adding-sdr-to-spring-mvc-app"><a class="anchor" href="index.html#customizing-sdr.adding-sdr-to-spring-mvc-app"></a>15.5. Adding Spring Data REST to an Existing Spring MVC Application</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The following steps are unnecessary if you use Spring Boot. For Boot applications, adding <code>spring-boot-starter-data-rest</code> automatically adds Spring Data REST to your application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can integrate Spring Data REST with an existing Spring MVC application. In your Spring MVC configuration (most likely where you configure your MVC resources), add a bean reference to the Java configuration class that is responsible for configuring the <code>RepositoryRestController</code>. The class name is <code>org.springframework.data.rest.webmvc.RepositoryRestMvcConfiguration</code>. The following example shows how to use an <code>@Import</code> annotation to add the proper reference:</p>
</div>
<div class="paragraph">
<p>In Java, this would look like:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.springframework.context.annotation.Import;
import org.springframework.data.rest.webmvc.RepositoryRestMvcConfiguration;

@Configuration
@Import(RepositoryRestMvcConfiguration.class)
public class MyApplicationConfiguration {

  …
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows the corresponding XML configuration:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;bean class="org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration"/&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When your ApplicationContext comes across this bean definition, it bootstraps the necessary Spring MVC resources to fully configure the controller for exporting the repositories it finds in that <code>ApplicationContext</code> and any parent contexts.</p>
</div>
<div class="sect3">
<h4>15.5.1. More on Required Configuration</h4>
<div class="paragraph">
<p>Spring Data REST depends on a couple Spring MVC resources that must be configured correctly for it to work inside an existing Spring MVC application. We tried to isolate those resources from whatever similar resources already exist within your application, but it may be that you want to customize some of the behavior of Spring Data REST by modifying these MVC components.</p>
</div>
<div class="paragraph">
<p>You should pay special attention to configuring <code>RepositoryRestHandlerMapping</code>, covered in the next section.</p>
</div>
<div class="sect4">
<h5><code>RepositoryRestHandlerMapping</code></h5>
<div class="paragraph">
<p>We register a custom <code>HandlerMapping</code> instance that responds only to the <code>RepositoryRestController</code> and only if a path is meant to be handled by Spring Data REST. In order to keep paths that are meant to be handled by your application separate from those handled by Spring Data REST, this custom <code>HandlerMapping</code> class inspects the URL path and checks to see if a repository has been exported under that name. If it has, the custom <code>HandlerMapping</code> class lets the request be handled by Spring Data REST. If there is no Repository exported under that name, it returns <code>null</code>, which means &#8220;let other <code>HandlerMapping</code> instances try to service this request&#8221;.</p>
</div>
<div class="paragraph">
<p>The Spring Data REST <code>HandlerMapping</code> is configured with <code>order=(Ordered.LOWEST_PRECEDENCE - 100)</code>, which means it is usually first in line when it comes time to map a URL path. Your existing application never gets a chance to service a request that is meant for a repository. For example, if you have a repository exported under the name of <code>person</code>, then all requests to your application that start with <code>/person</code> are handled by Spring Data REST, and your application never sees that request. If your repository is exported under a different name (such as <code>people</code>), however, then requests to <code>/people</code> go to Spring Data REST and requests to <code>/person</code> are handled by your application.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customizing-sdr.overriding-sdr-response-handlers"><a class="anchor" href="index.html#customizing-sdr.overriding-sdr-response-handlers"></a>15.6. Overriding Spring Data REST Response Handlers</h3>
<div class="paragraph">
<p>Sometimes, you may want to write a custom handler for a specific resource. To take advantage of Spring Data REST&#8217;s settings, message converters, exception handling, and more, use the <code>@RepositoryRestController</code> annotation instead of a standard Spring MVC <code>@Controller</code> or <code>@RestController</code>. Controllers annotated with <code>@RepositoryRestController</code> are served from the API base path defined in <code>RepositoryRestConfiguration.setBasePath</code>, which is used by all other RESTful endpoints (for example, <code>/api</code>). The following example shows how to use the <code>@RepositoryRestController</code> annotation:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestController
public class ScannerController {

    private final ScannerRepository repository;

    @Autowired
    public ScannerController(ScannerRepository repo) { <i class="conum" data-value="1"></i><b>(1)</b>
        repository = repo;
    }

    @RequestMapping(method = GET, value = "/scanners/search/listProducers") <i class="conum" data-value="2"></i><b>(2)</b>
    public @ResponseBody ResponseEntity&lt;?&gt; getProducers() {
        List&lt;String&gt; producers = repository.listProducers(); <i class="conum" data-value="3"></i><b>(3)</b>

        //
        // do some intermediate processing, logging, etc. with the producers
        //

        Resources&lt;String&gt; resources = new Resources&lt;String&gt;(producers); <i class="conum" data-value="4"></i><b>(4)</b>

        resources.add(linkTo(methodOn(ScannerController.class).getProducers()).withSelfRel()); <i class="conum" data-value="5"></i><b>(5)</b>

        // add other links as needed

        return ResponseEntity.ok(resources); <i class="conum" data-value="6"></i><b>(6)</b>
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This example uses constructor injection.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This handler plugs in a custom handler for a Spring Data finder method.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This handler uses the underlying repository to fetch data, but then does some form of post processing before returning the final data set to the client.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The results need to be wrapped up in a Spring HATEOAS <code>Resources</code> object to return a collection but only a <code>Resource</code> for a single item.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Add a link back to this exact method as a <code>self</code> link.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Returning the collection by using Spring MVC&#8217;s <code>ResponseEntity</code> wrapper ensures that the collection is properly wrapped and rendered in the proper accept type.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Resources</code> is for a collection, while <code>Resource</code> is for a single item. These types can be combined. If you know the links for each item in a collection, use <code>Resources&lt;Resource&lt;String&gt;&gt;</code> (or whatever the core domain type is rather than <code>String</code>). Doing so lets you assemble links for each item as well as for the whole collection.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In this example, the combined path is <code>RepositoryRestConfiguration.getBasePath()</code> + <code>/scanners/search/listProducers</code>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="customizing-sdr.overriding-sdr-response-handlers.annotations"><a class="anchor" href="index.html#customizing-sdr.overriding-sdr-response-handlers.annotations"></a>15.6.1. @RepositoryRestResource VS. @BasePathAwareController</h4>
<div class="paragraph">
<p>If you are not interested in entity-specific operations but still want to build custom operations underneath <code>basePath</code>, such as Spring MVC views, resources, and others, use <code>@BasePathAwareController</code>.
If you&#8217;re using <code>@RepositoryRestResource</code> on your custom controller, it will only handle the request if your request mappings blend into the URI space used by the repository.
It will also apply the following extra functionality to the controller methods:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>CORS configuration according as defined for the repository mapped to the base path segment used in the request mapping of the handler method.</p>
</li>
<li>
<p>Apply an <code>OpenEntityManagerInViewInterceptor</code> if JPA is used to make sure you can access properties marked as to be resolved lazily.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you use <code>@Controller</code> or <code>@RestController</code> for anything, that code is totally outside the scope of Spring Data REST. This extends to request handling, message converters, exception handling, and other uses.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customizing-sdr.customizing-json-output"><a class="anchor" href="index.html#customizing-sdr.customizing-json-output"></a>15.7. Customizing the JSON Output</h3>
<div class="paragraph">
<p>Sometimes in your application, you need to provide links to other resources from a particular entity. For example, a <code>Customer</code> response might be enriched with links to a current shopping cart or links to manage resources related to that entity. Spring Data REST provides integration with <a href="https://github.com/SpringSource/spring-hateoas">Spring HATEOAS</a> and provides an extension hook that lets you alter the representation of resources that go out to the client.</p>
</div>
<div class="sect3">
<h4>15.7.1. The <code>ResourceProcessor</code> Interface</h4>
<div class="paragraph">
<p>Spring HATEOAS defines a <code>ResourceProcessor&lt;&gt;</code> interface for processing entities. All beans of type <code>ResourceProcessor&lt;Resource&lt;T&gt;&gt;</code> are automatically picked up by the Spring Data REST exporter and triggered when serializing an entity of type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>For example, to define a processor for a <code>Person</code> entity, add a <code>@Bean</code> similar to the following (which is taken from the Spring Data REST tests) to your <code>ApplicationContext</code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Bean
public ResourceProcessor&lt;Resource&lt;Person&gt;&gt; personProcessor() {

   return new ResourceProcessor&lt;Resource&lt;Person&gt;&gt;() {

     @Override
     public Resource&lt;Person&gt; process(Resource&lt;Person&gt; resource) {

      resource.add(new Link("http://localhost:8080/people", "added-link"));
      return resource;
     }
   };
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The preceding example hard codes a link to <code><a href="http://localhost:8080/people" class="bare">http://localhost:8080/people</a></code>. If you have a Spring MVC endpoint inside your app to which you wish to link, consider using Spring HATEOAS&#8217;s <a href="https://github.com/spring-projects/spring-hateoas#building-links-pointing-to-methods"><code>linkTo(&#8230;&#8203;)</code></a> method to avoid managing the URL.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4>15.7.2. Adding Links</h4>
<div class="paragraph">
<p>You can add links to the default representation of an entity by calling <code>resource.add(Link)</code>, as the preceding example shows. Any links you add to the <code>Resource</code> are added to the final output.</p>
</div>
</div>
<div class="sect3">
<h4>15.7.3. Customizing the Representation</h4>
<div class="paragraph">
<p>The Spring Data REST exporter executes any discovered <code>ResourceProcessor</code> instances before it creates the output representation. It does so by registering a <code>Converter&lt;Entity, Resource&gt;</code> instance with an internal <code>ConversionService</code>. This is the component responsible for creating the links to referenced entities (such as those objects under the <code>_links</code> property in the object&#8217;s JSON representation). It takes an <code>@Entity</code> and iterates over its properties, creating links for those properties that are managed by a <code>Repository</code> and copying across any embedded or simple properties.</p>
</div>
<div class="paragraph">
<p>If your project needs to have output in a different format, however, you can completely replace the default outgoing JSON representation with your own. If you register your own <code>ConversionService</code> in the <code>ApplicationContext</code> and register your own <code>Converter&lt;Entity, Resource&gt;</code>, you can return a <code>Resource</code> implementation of your choosing.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customizing-sdr.custom-jackson-deserialization"><a class="anchor" href="index.html#customizing-sdr.custom-jackson-deserialization"></a>15.8. Adding Custom Serializers and Deserializers to Jackson&#8217;s <code>ObjectMapper</code></h3>
<div class="paragraph">
<p>Sometimes, the behavior of the Spring Data REST <code>ObjectMapper</code> (which has been specially configured to use intelligent serializers that can turn domain objects into links and back again) may not handle your domain model correctly. You can structure your data in so many ways that you may find your own domain model does not correctly translate to JSON. It is also sometimes not practical in these cases to support a complex domain model in a generic way. Sometimes, depending on the complexity, it is not even possible to offer a generic solution.</p>
</div>
<div class="paragraph">
<p>To accommodate the largest percentage of the use cases, Spring Data REST tries to render your object graph correctly. It tries to serialize unmanaged beans as normal POJOs, and tries to create links to managed beans where necessary. However, if your domain model does not easily lend itself to reading or writing plain JSON, you may want to configure Jackson&#8217;s <code>ObjectMapper</code> with your own custom type mappings and (de)serializers.</p>
</div>
<div class="sect3">
<h4>15.8.1. Abstract Class Registration</h4>
<div class="paragraph">
<p>One key configuration point you might need to hook into is when you use an abstract class (or an interface) in your domain model. Jackson does not, by default, know what implementation to create for an interface. Consider the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class MyEntity {

  @OneToMany
  private List&lt;MyInterface&gt; interfaces;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In a default configuration, Jackson has no idea what class to instantiate when POSTing new data to the exporter. You need to tell Jackson either through an annotation or, more cleanly, by registering a type mapping by using a <a href="https://wiki.fasterxml.com/JacksonFeatureModules">Module</a>.</p>
</div>
<div class="paragraph">
<p>Any <code>Module</code> bean declared within the scope of your <code>ApplicationContext</code> is picked up by the exporter and registered with its <code>ObjectMapper</code>. To add this special abstract class type mapping, you can create a <code>Module</code> bean and, in the <code>setupModule</code> method, add an appropriate <code>TypeResolver</code>, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyCustomModule extends SimpleModule {

  private MyCustomModule() {
    super("MyCustomModule", new Version(1, 0, 0, "SNAPSHOT"));
  }

  @Override
  public void setupModule(SetupContext context) {
    context.addAbstractTypeResolver(
      new SimpleAbstractTypeResolver().addMapping(MyInterface.class,
        MyInterfaceImpl.class));
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once you have access to the <code>SetupContext</code> object in your <code>Module</code>, you can do all sorts of cool things to configure Jackon&#8217;s JSON mapping. You can read more about how <a href="https://wiki.fasterxml.com/JacksonFeatureModules">Modules work on Jackson&#8217;s wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4>15.8.2. Adding Custom Serializers for Domain Types</h4>
<div class="paragraph">
<p>If you want to serialize or deserialize a domain type in a special way, you can register your own implementations with Jackson&#8217;s <code>ObjectMapper</code>. Then the Spring Data REST exporter transparently handles those domain objects correctly.</p>
</div>
<div class="paragraph">
<p>To add serializers from your <code>setupModule</code> method implementation, you can do something like the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyCustomModule extends SimpleModule {

  …

  @Override
  public void setupModule(SetupContext context) {

    SimpleSerializers serializers = new SimpleSerializers();
    SimpleDeserializers deserializers = new SimpleDeserializers();

    serializers.addSerializer(MyEntity.class, new MyEntitySerializer());
    deserializers.addDeserializer(MyEntity.class, new MyEntityDeserializer());

    context.addSerializers(serializers);
    context.addDeserializers(deserializers);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Thanks to the custom module shown in the preceding example, Spring Data REST correctly handles your domain objects when they are too complex for the 80% generic use case that Spring Data REST tries to cover.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customizing-sdr.configuring-cors"><a class="anchor" href="index.html#customizing-sdr.configuring-cors"></a>15.9. Configuring CORS</h3>
<div class="paragraph">
<p>For security reasons, browsers prohibit AJAX calls to resources residing outside the current origin. When working with client-side HTTP requests issued by a browser, you want to enable specific HTTP resources to be accessible.</p>
</div>
<div class="paragraph">
<p>Spring Data REST, as of 2.6, supports <a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">Cross-Origin Resource Sharing</a> (CORS) through <a href="https://docs.spring.io/spring/docs/5.3.1/spring-framework-reference/web.html#mvc-cors">Spring&#8217;s CORS</a> support.</p>
</div>
<div class="sect3">
<h4>15.9.1. Repository Interface CORS Configuration</h4>
<div class="paragraph">
<p>You can add a <code>@CrossOrigin</code> annotation to your repository interfaces to enable CORS for the whole repository. By default, <code>@CrossOrigin</code> allows all origins and HTTP methods. The following example shows a cross-origin repository interface definition:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CrossOrigin
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, CORS support is enabled for the whole <code>PersonRepository</code>. <code>@CrossOrigin</code> provides attributes to configure CORS support, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CrossOrigin(origins = "http://domain2.example",
  methods = { RequestMethod.GET, RequestMethod.POST, RequestMethod.DELETE },
  maxAge = 3600)
interface PersonRepository extends CrudRepository&lt;Person, Long&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The preceding example enables CORS support for the whole <code>PersonRepository</code> by providing one origin, restricted to the <code>GET</code>, <code>POST</code>, and <code>DELETE</code> methods and with a max age of 3600 seconds.</p>
</div>
</div>
<div class="sect3">
<h4>15.9.2. Repository REST Controller Method CORS Configuration</h4>
<div class="paragraph">
<p>Spring Data REST fully supports <a href="https://docs.spring.io/spring/docs/5.3.1/spring-framework-reference/web.html#controller-method-cors-configuration">Spring Web MVC&#8217;s controller method configuration</a> on custom REST controllers that share repository base paths, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RepositoryRestController
public class PersonController {

  @CrossOrigin(maxAge = 3600)
  @RequestMapping(path = "/people/xml/{id}", method = RequestMethod.GET, produces = MediaType.APPLICATION_XML_VALUE)
  public Person retrieve(@PathVariable Long id) {
    // …
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Controllers annotated with <code>@RepositoryRestController</code> inherit <code>@CrossOrigin</code> configuration from their associated repositories.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4>15.9.3. Global CORS Configuration</h4>
<div class="paragraph">
<p>In addition to fine-grained, annotation-based configuration, you probably want to define some global CORS configuration as well. This is similar to Spring Web MVC&#8217;S CORS configuration but can be declared within Spring Data REST and combined with fine-grained <code>@CrossOrigin</code> configuration. By default, all origins and <code>GET</code>, <code>HEAD</code>, and <code>POST</code> methods are allowed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Existing Spring Web MVC CORS configuration is not applied to Spring Data REST.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example sets an allowed origin, adds the PUT and DELETE HTTP methods, adds and exposes some headers, and sets a maximum age of an hour:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component
public class SpringDataRestCustomization extends RepositoryRestConfigurerAdapter {

  @Override
  public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {

    config.getCorsRegistry().addMapping("/person/**")
      .allowedOrigins("http://domain2.example")
      .allowedMethods("PUT", "DELETE")
      .allowedHeaders("header1", "header2", "header3")
      .exposedHeaders("header1", "header2")
      .allowCredentials(false).maxAge(3600);
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="appendix" class="sect0"><a class="anchor" href="index.html#appendix"></a>Appendix</h1>
<div class="sect1">
<h2 id="example-api-usage-with-curl"><a class="anchor" href="index.html#example-api-usage-with-curl"></a>Appendix A: Using cURL to talk to Spring Data REST</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix contains a list of guides that demonstrate interacting with a Spring Data REST service over cURL:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://spring.io/guides/gs/accessing-data-rest/">Accessing JPA Data with REST</a></p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/accessing-neo4j-data-rest/">Accessing Neo4j Data with REST</a></p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/accessing-mongodb-data-rest/">Accessing MongoDB Data with REST</a></p>
</li>
<li>
<p><a href="https://spring.io/guides/gs/accessing-gemfire-data-rest/">Accessing GemFire Data with REST</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-data-examples"><a class="anchor" href="index.html#spring-data-examples"></a>Appendix B: Spring Data REST example projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix contains a list of Spring Data REST sample applications. The exact version of each example is not guaranteed to match the version of this reference manual.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To get them all, visit <a href="https://github.com/spring-projects/spring-data-examples" class="bare">https://github.com/spring-projects/spring-data-examples</a> and either clone or download a zipball. Doing so gives you example applications for all supported Spring Data projects. To see them, navigate to <code>spring-data-examples/rest</code>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="spring-data-examples.multi-store"><a class="anchor" href="index.html#spring-data-examples.multi-store"></a>Multi-store Example</h3>
<div class="paragraph">
<p><a href="https://github.com/spring-projects/spring-data-examples/tree/master/rest/multi-store">This example</a> shows how to mix together several underlying Spring Data projects.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-data-examples.projections"><a class="anchor" href="index.html#spring-data-examples.projections"></a>Projections</h3>
<div class="paragraph">
<p><a href="https://github.com/spring-projects/spring-data-examples/tree/master/rest/projections">This example</a> contains more detailed code you can use to explore <a href="index.html#projections-excerpts">projections</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-data-examples.spring-security"><a class="anchor" href="index.html#spring-data-examples.spring-security"></a>Spring Data REST with Spring Security</h3>
<div class="paragraph">
<p><a href="https://github.com/spring-projects/spring-data-examples/tree/master/rest/security">This example</a> shows how to secure a <a href="https://projects.spring.io/spring-data-rest">Spring Data REST</a> application in multiple ways with <a href="https://projects.spring.io/spring-security">Spring Security</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-data-examples.starbucks"><a class="anchor" href="index.html#spring-data-examples.starbucks"></a>Starbucks example</h3>
<div class="paragraph">
<p><a href="https://github.com/spring-projects/spring-data-examples/tree/master/rest/starbucks">This example</a> exposes 10,843 Starbucks coffee shops through a RESTful API that allows access to the stores in a hypermedia-based way and exposes a resource to execute a geo-location search for coffee shops.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.4.1<br>
Last updated 2020-11-11 12:32:23 +0100
</div>
</div>
<link rel="stylesheet" href="js/highlight/styles/github.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<script>if(window.parent==window){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-2728886-23','auto',{'siteSpeedSampleRate':100});ga('send','pageview');}</script></body>
</html>